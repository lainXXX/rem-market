24-12-12.20:05:08.302 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 23384 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-12.20:05:08.304 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-12.20:05:09.272 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-12.20:05:09.274 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-12.20:05:09.335 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 48 ms. Found 0 Redis repository interfaces.
24-12-12.20:05:09.824 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-12.20:05:09.934 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-12.20:05:09.941 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-12.20:05:09.941 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-12.20:05:10.107 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-12.20:05:10.107 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1764 ms
24-12-12.20:05:10.367 [main            ] INFO  Version                - Redisson 3.26.0
24-12-12.20:05:11.222 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.20:05:11.690 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.20:05:15.074 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-12.20:05:15.157 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-12.20:05:15.167 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-12.20:05:15.168 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.20:05:15.423 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#797fcf9:0/SimpleConnection@74764622 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 55098]
24-12-12.20:05:16.282 [main            ] INFO  Application            - Started Application in 8.394 seconds (JVM running for 9.668)
24-12-12.20:05:16.358 [RMI TCP Connection(1)-192.168.137.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-12.20:05:16.358 [RMI TCP Connection(1)-192.168.137.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-12.20:05:16.359 [RMI TCP Connection(1)-192.168.137.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-12-12.20:05:17.299 [RMI TCP Connection(3)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-12.20:05:18.282 [RMI TCP Connection(3)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-12.20:05:20.011 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:05:20.240 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:05:25.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:05:25.104 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:05:30.008 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:05:30.122 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:05:35.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:05:35.063 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:05:40.005 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:05:40.156 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:05:45.009 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:05:45.108 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:05:50.001 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:05:50.088 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:05:55.006 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:05:55.106 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:06:00.015 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:06:00.125 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:06:05.000 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:06:05.141 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:06:10.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:06:10.095 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:06:15.002 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:06:15.110 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:06:20.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:06:20.092 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:06:25.004 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:06:25.110 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:06:30.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:06:30.057 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:06:35.007 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:06:35.148 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:06:40.005 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:06:40.061 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:06:45.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:06:45.077 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:06:50.010 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:06:50.132 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:06:55.009 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:06:55.114 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:07:00.001 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:07:00.067 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:07:03.860 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.20:07:03.921 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.20:07:04.265 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.20:07:04.880 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.20:07:05.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:07:05.149 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:07:05.343 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.20:07:05.343 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.20:07:05.566 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-12.20:07:05.572 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-12-12.20:07:14.143 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 12412 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-12.20:07:14.145 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-12.20:07:14.878 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-12.20:07:14.879 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-12.20:07:14.932 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 0 Redis repository interfaces.
24-12-12.20:07:15.386 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-12.20:07:15.488 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-12.20:07:15.494 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-12.20:07:15.494 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-12.20:07:15.643 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-12.20:07:15.643 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1462 ms
24-12-12.20:07:15.898 [main            ] INFO  Version                - Redisson 3.26.0
24-12-12.20:07:16.763 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.20:07:17.178 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.20:07:20.683 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-12.20:07:20.763 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-12.20:07:20.773 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-12.20:07:20.775 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.20:07:21.024 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#76cdafa3:0/SimpleConnection@6caa4dc5 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 55216]
24-12-12.20:07:21.755 [main            ] INFO  Application            - Started Application in 7.984 seconds (JVM running for 9.183)
24-12-12.20:07:23.382 [RMI TCP Connection(3)-192.168.137.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-12.20:07:23.383 [RMI TCP Connection(3)-192.168.137.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-12.20:07:23.385 [RMI TCP Connection(3)-192.168.137.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
24-12-12.20:07:23.423 [RMI TCP Connection(4)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-12.20:07:24.407 [RMI TCP Connection(4)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-12.20:07:25.010 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:07:25.231 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:07:30.008 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:07:30.135 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:07:35.015 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:07:35.153 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:07:40.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:07:40.067 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:07:45.010 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:07:45.127 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:07:50.010 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:07:50.144 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:07:55.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:07:55.059 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:08:00.016 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:08:00.076 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:08:05.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:08:05.097 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:08:10.004 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:08:10.111 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:08:15.003 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:08:15.132 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:08:20.003 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:08:20.106 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:08:25.016 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:08:25.125 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:08:30.014 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:08:30.883 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:08:35.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:08:35.088 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:08:40.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:08:40.575 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:08:45.014 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:08:45.135 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:08:50.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:08:50.052 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:08:55.010 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:08:55.128 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:09:00.009 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:09:00.144 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:09:05.005 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:09:05.101 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:09:08.859 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动数据装配 activityId:100301
24-12-12.20:09:10.007 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:09:10.077 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:09:15.014 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:09:15.136 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:09:20.004 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:09:20.112 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:09:25.008 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:09:25.130 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:09:30.004 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:09:30.148 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:09:35.005 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:09:35.105 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:09:40.009 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:09:40.119 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:09:45.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:09:45.098 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:09:50.002 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:09:50.051 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:09:53.427 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.20:09:53.494 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.20:09:53.744 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.20:09:54.040 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.20:09:54.487 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.20:09:54.487 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.20:09:54.743 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-12.20:09:54.743 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-12-12.20:11:07.722 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 21616 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-12.20:11:07.724 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-12.20:11:08.510 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-12.20:11:08.511 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-12.20:11:08.567 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 45 ms. Found 0 Redis repository interfaces.
24-12-12.20:11:09.007 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-12.20:11:09.112 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-12.20:11:09.119 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-12.20:11:09.119 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-12.20:11:09.268 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-12.20:11:09.268 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1505 ms
24-12-12.20:11:09.491 [main            ] INFO  Version                - Redisson 3.26.0
24-12-12.20:11:10.329 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.20:11:10.738 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.20:11:13.987 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-12.20:11:14.064 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-12.20:11:14.072 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-12.20:11:14.074 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.20:11:14.396 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#15d114ce:0/SimpleConnection@63dc3420 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 55351]
24-12-12.20:11:15.170 [main            ] INFO  Application            - Started Application in 7.884 seconds (JVM running for 9.129)
24-12-12.20:11:15.833 [RMI TCP Connection(1)-192.168.137.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-12.20:11:15.833 [RMI TCP Connection(1)-192.168.137.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-12.20:11:15.834 [RMI TCP Connection(1)-192.168.137.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-12-12.20:11:15.932 [RMI TCP Connection(2)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-12.20:11:16.856 [RMI TCP Connection(2)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-12.20:11:30.014 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:11:30.214 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:12:00.007 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:12:00.107 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:12:00.164 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:12:30.014 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:12:30.168 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:12:51.973 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动数据装配 activityId:100301
24-12-12.20:13:00.003 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:13:00.068 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:13:00.102 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:13:30.015 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:13:30.119 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:13:44.089 [http-nio-8091-exec-3] INFO  RaffleActivityController -  用户id:100301 活动id:100301
24-12-12.20:13:44.406 [http-nio-8091-exec-3] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
org.apache.ibatis.exceptions.TooManyResultsException: Expected one result (or null) to be returned by selectOne(), but found: 201
	at com.baomidou.mybatisplus.core.mapper.BaseMapper.selectOne(BaseMapper.java:312)
	at java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:627)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$DefaultMethodInvoker.invoke(MybatisMapperProxy.java:166)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.selectOne(Unknown Source)
	at com.baomidou.mybatisplus.core.mapper.BaseMapper.selectOne(BaseMapper.java:295)
	at java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:627)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$DefaultMethodInvoker.invoke(MybatisMapperProxy.java:166)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.selectOne(Unknown Source)
	at com.baomidou.mybatisplus.extension.conditions.query.ChainQuery.lambda$one$cd9f9c92$1(ChainQuery.java:59)
	at com.baomidou.mybatisplus.extension.conditions.ChainWrapper.execute(ChainWrapper.java:63)
	at com.baomidou.mybatisplus.extension.conditions.query.ChainQuery.one(ChainQuery.java:59)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository.getUserUnconsumedOrder(ActivityRepository.java:269)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$FastClassBySpringCGLIB$$ae16c582.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$daa934cf.getUserUnconsumedOrder(<generated>)
	at top.javarem.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:48)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:78)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
24-12-12.20:14:00.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:14:00.075 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:14:00.114 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:14:30.009 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:14:30.231 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:15:00.005 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:15:00.127 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:15:00.185 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:15:30.008 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:15:30.130 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:16:00.003 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:16:00.087 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:16:00.192 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:16:30.009 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:16:30.130 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:16:44.882 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.20:16:44.938 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.20:16:45.293 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.20:16:45.452 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.20:16:45.946 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.20:16:45.946 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.20:16:46.183 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-12.20:16:46.191 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-12-12.20:16:53.887 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 19944 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-12.20:16:53.890 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-12.20:16:54.607 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-12.20:16:54.609 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-12.20:16:54.663 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 44 ms. Found 0 Redis repository interfaces.
24-12-12.20:16:55.077 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-12.20:16:55.179 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-12.20:16:55.186 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-12.20:16:55.186 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-12.20:16:55.334 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-12.20:16:55.334 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1409 ms
24-12-12.20:16:55.557 [main            ] INFO  Version                - Redisson 3.26.0
24-12-12.20:16:56.411 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.20:16:56.751 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.20:16:59.885 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-12.20:16:59.961 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-12.20:16:59.970 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-12.20:16:59.972 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.20:17:00.249 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3312f4f4:0/SimpleConnection@145a821d [delegate=amqp://lain@110.41.180.185:5672/, localPort= 55488]
24-12-12.20:17:01.038 [main            ] INFO  Application            - Started Application in 7.53 seconds (JVM running for 8.714)
24-12-12.20:17:01.923 [RMI TCP Connection(1)-192.168.137.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-12.20:17:01.923 [RMI TCP Connection(1)-192.168.137.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-12.20:17:01.925 [RMI TCP Connection(1)-192.168.137.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
24-12-12.20:17:02.005 [RMI TCP Connection(2)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-12.20:17:02.864 [RMI TCP Connection(2)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-12.20:17:30.002 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:17:30.220 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:18:00.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:18:00.104 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:18:00.142 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:18:30.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:18:30.048 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:19:00.014 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:19:00.110 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:19:00.153 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:19:30.011 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:19:30.113 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:19:58.987 [http-nio-8091-exec-2] INFO  RaffleActivityController -  用户id:100301 活动id:100301
24-12-12.20:19:59.249 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
java.lang.IllegalArgumentException: No enum constant top.javarem.domain.activity.model.vo.UserRaffleStatus.create
	at java.lang.Enum.valueOf(Enum.java:238)
	at top.javarem.domain.activity.model.vo.UserRaffleStatus.valueOf(UserRaffleStatus.java:11)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository.getUserUnconsumedOrder(ActivityRepository.java:278)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$FastClassBySpringCGLIB$$ae16c582.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.getUserUnconsumedOrder(<generated>)
	at top.javarem.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:48)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:78)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
24-12-12.20:20:00.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:20:00.046 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:20:00.153 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:20:30.000 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:20:30.119 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:21:00.015 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:21:00.058 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:21:00.124 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:21:30.001 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:21:30.056 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:22:00.002 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:22:00.130 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:22:00.172 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:22:30.013 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:22:30.134 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:23:00.014 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:23:00.138 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:23:00.177 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:23:30.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:23:30.077 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:24:00.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:24:00.079 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:24:00.178 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:24:30.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:24:30.078 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:25:00.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:25:00.080 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:25:00.189 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:25:30.015 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:25:30.154 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:26:00.012 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:26:00.084 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:26:00.186 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:26:30.002 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:26:30.058 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:27:00.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:27:00.062 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:27:00.164 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:27:30.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:27:30.065 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:28:00.015 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:28:00.171 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:28:00.208 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:28:30.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:28:30.073 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:29:00.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:29:00.076 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:29:00.117 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:29:30.008 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:29:30.118 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:30:00.012 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:30:00.082 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:30:00.123 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:30:17.017 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.20:30:17.081 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.20:30:17.286 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.20:30:17.944 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.20:30:18.391 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.20:30:18.391 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.20:30:18.572 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-12.20:30:18.572 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-12-12.20:30:22.398 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 24532 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-12.20:30:22.400 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-12.20:30:23.273 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-12.20:30:23.275 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-12.20:30:23.328 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 41 ms. Found 0 Redis repository interfaces.
24-12-12.20:30:23.856 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-12.20:30:23.937 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-12.20:30:23.944 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-12.20:30:23.944 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-12.20:30:24.110 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-12.20:30:24.110 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1675 ms
24-12-12.20:30:24.423 [main            ] INFO  Version                - Redisson 3.26.0
24-12-12.20:30:25.209 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.20:30:25.684 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.20:30:28.990 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-12.20:30:29.078 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-12.20:30:29.089 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-12.20:30:29.091 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.20:30:29.415 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#492c8137:0/SimpleConnection@5dc120ab [delegate=amqp://lain@110.41.180.185:5672/, localPort= 55664]
24-12-12.20:30:30.252 [main            ] INFO  Application            - Started Application in 8.277 seconds (JVM running for 9.737)
24-12-12.20:30:30.887 [RMI TCP Connection(1)-192.168.137.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-12.20:30:30.888 [RMI TCP Connection(1)-192.168.137.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-12.20:30:30.890 [RMI TCP Connection(1)-192.168.137.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
24-12-12.20:30:30.962 [RMI TCP Connection(2)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-12.20:30:31.985 [RMI TCP Connection(2)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-12.20:30:46.323 [http-nio-8091-exec-1] INFO  RaffleActivityController -  用户id:100301 活动id:100301
24-12-12.20:31:00.275 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:31:01.844 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:31:01.932 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:31:46.481 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m13s882ms612µs600ns).
24-12-12.20:31:46.481 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:31:48.226 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:33:03.277 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m17s304ms583µs100ns).
24-12-12.20:33:03.450 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:33:05.305 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:33:06.033 [http-nio-8091-exec-1] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
java.lang.IllegalArgumentException: No enum constant top.javarem.domain.activity.model.vo.UserRaffleStatus.create
	at java.lang.Enum.valueOf(Enum.java:238)
	at top.javarem.domain.activity.model.vo.UserRaffleStatus.valueOf(UserRaffleStatus.java:11)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository.getUserUnconsumedOrder(ActivityRepository.java:278)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$FastClassBySpringCGLIB$$ae16c582.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$a5ed85ae.getUserUnconsumedOrder(<generated>)
	at top.javarem.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:48)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:78)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
24-12-12.20:33:13.720 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.20:33:13.761 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.20:33:14.578 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.20:33:14.578 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.20:33:15.046 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.20:33:15.046 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.20:33:15.302 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-12.20:33:15.310 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-12-12.20:35:19.523 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 12656 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-12.20:35:19.525 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-12.20:35:20.231 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-12.20:35:20.233 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-12.20:35:20.287 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 44 ms. Found 0 Redis repository interfaces.
24-12-12.20:35:20.706 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-12.20:35:20.810 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-12.20:35:20.816 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-12.20:35:20.816 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-12.20:35:20.963 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-12.20:35:20.963 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1405 ms
24-12-12.20:35:21.183 [main            ] INFO  Version                - Redisson 3.26.0
24-12-12.20:35:22.031 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.20:35:22.379 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.20:35:25.498 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-12.20:35:25.574 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-12.20:35:25.583 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-12.20:35:25.584 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.20:35:25.969 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3312f4f4:0/SimpleConnection@145a821d [delegate=amqp://lain@110.41.180.185:5672/, localPort= 55802]
24-12-12.20:35:26.862 [main            ] INFO  Application            - Started Application in 7.69 seconds (JVM running for 8.856)
24-12-12.20:35:28.126 [RMI TCP Connection(3)-192.168.137.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-12.20:35:28.126 [RMI TCP Connection(3)-192.168.137.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-12.20:35:28.128 [RMI TCP Connection(3)-192.168.137.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
24-12-12.20:35:28.189 [RMI TCP Connection(2)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-12.20:35:29.250 [RMI TCP Connection(2)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-12.20:35:30.013 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:35:30.235 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:36:00.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:36:00.059 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:36:00.166 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:36:30.004 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:36:30.126 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:36:59.746 [http-nio-8091-exec-2] INFO  RaffleActivityController -  用户id:100301 活动id:100301
24-12-12.20:36:59.980 [http-nio-8091-exec-2] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=933727404664, orderTime=Sun Dec 08 23:50:16 CST 2024, status=CREATE)
24-12-12.20:36:59.980 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 创建参与记录订单 orderId:933727404664
24-12-12.20:36:59.980 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 开始执行抽奖流程 用户id : rem, 策略id : 100006
24-12-12.20:37:00.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:37:00.065 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:37:00.130 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:37:00.480 [http-nio-8091-exec-2] INFO  DefaultLogicNode       - 默认规则接管执行
24-12-12.20:37:00.480 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 责任链获取奖品ID awardId: 108 ruleModel: default
24-12-12.20:37:00.831 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'tree_node_key' in 'field list'
### The error may exist in top/javarem/infrastructure/dao/mapper/RuleTreeNodeMapper.java (best guess)
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: SELECT   tree_id,tree_node_key,rule_desc,rule_value   FROM rule_tree_node      WHERE  (tree_id = ?)
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'tree_node_key' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'tree_node_key' in 'field list'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:239)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy113.selectList(Unknown Source)
	at com.baomidou.mybatisplus.extension.conditions.query.ChainQuery.lambda$list$1d3f6527$1(ChainQuery.java:39)
	at com.baomidou.mybatisplus.extension.conditions.ChainWrapper.execute(ChainWrapper.java:63)
	at com.baomidou.mybatisplus.extension.conditions.query.ChainQuery.list(ChainQuery.java:39)
	at top.javarem.infrastructure.adapter.repository.StrategyRepository.getNodes(StrategyRepository.java:403)
	at top.javarem.infrastructure.adapter.repository.StrategyRepository.getRuleTreeVO(StrategyRepository.java:278)
	at top.javarem.infrastructure.adapter.repository.StrategyRepository$$FastClassBySpringCGLIB$$67d448e6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.StrategyRepository$$EnhancerBySpringCGLIB$$cfea55df.getRuleTreeVO(<generated>)
	at top.javarem.domain.strategy.service.raffle.DefaultRaffleStrategy.doRaffleLogicTree(DefaultRaffleStrategy.java:53)
	at top.javarem.domain.strategy.service.AbstractRaffleLogic.performRaffle(AbstractRaffleLogic.java:56)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:84)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLSyntaxErrorException: Unknown column 'tree_node_key' in 'field list'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 79 common frames omitted
24-12-12.20:37:30.007 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:37:30.130 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:38:00.000 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:38:00.077 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:38:00.138 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:38:22.605 [http-nio-8091-exec-5] INFO  RaffleActivityController -  用户id:100301 活动id:100301
24-12-12.20:38:22.774 [http-nio-8091-exec-5] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=933727404664, orderTime=Sun Dec 08 23:50:16 CST 2024, status=CREATE)
24-12-12.20:38:22.774 [http-nio-8091-exec-5] INFO  RaffleActivityController - 活动抽奖 创建参与记录订单 orderId:933727404664
24-12-12.20:38:22.774 [http-nio-8091-exec-5] INFO  AbstractRaffleLogic    - 开始执行抽奖流程 用户id : rem, 策略id : 100006
24-12-12.20:38:23.015 [http-nio-8091-exec-5] INFO  DefaultLogicNode       - 默认规则接管执行
24-12-12.20:38:23.016 [http-nio-8091-exec-5] INFO  AbstractRaffleLogic    - 责任链获取奖品ID awardId: 104 ruleModel: default
24-12-12.20:38:23.735 [http-nio-8091-exec-5] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
java.lang.NumberFormatException: For input string: "101:1"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.Integer.parseInt(Integer.java:580)
	at java.lang.Integer.parseInt(Integer.java:615)
	at top.javarem.domain.strategy.service.rule.tree.impl.LuckAwardLogicTreeNode.execute(LuckAwardLogicTreeNode.java:27)
	at top.javarem.domain.strategy.service.rule.tree.factory.engine.impl.DecisionTreeEngine.process(DecisionTreeEngine.java:44)
	at top.javarem.domain.strategy.service.raffle.DefaultRaffleStrategy.doRaffleLogicTree(DefaultRaffleStrategy.java:55)
	at top.javarem.domain.strategy.service.AbstractRaffleLogic.performRaffle(AbstractRaffleLogic.java:56)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:84)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
24-12-12.20:38:28.229 [http-nio-8091-exec-6] INFO  RaffleActivityController -  用户id:100301 活动id:100301
24-12-12.20:38:28.450 [http-nio-8091-exec-6] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=933727404664, orderTime=Sun Dec 08 23:50:16 CST 2024, status=CREATE)
24-12-12.20:38:28.450 [http-nio-8091-exec-6] INFO  RaffleActivityController - 活动抽奖 创建参与记录订单 orderId:933727404664
24-12-12.20:38:28.450 [http-nio-8091-exec-6] INFO  AbstractRaffleLogic    - 开始执行抽奖流程 用户id : rem, 策略id : 100006
24-12-12.20:38:28.748 [http-nio-8091-exec-6] INFO  DefaultLogicNode       - 默认规则接管执行
24-12-12.20:38:28.748 [http-nio-8091-exec-6] INFO  AbstractRaffleLogic    - 责任链获取奖品ID awardId: 108 ruleModel: default
24-12-12.20:38:29.052 [http-nio-8091-exec-6] INFO  LockLogicTreeNode      - 规则过滤-奖品锁 用户积分未达到奖品解锁标准
24-12-12.20:38:29.052 [http-nio-8091-exec-6] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
java.lang.NumberFormatException: For input string: "101:1"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.Integer.parseInt(Integer.java:580)
	at java.lang.Integer.parseInt(Integer.java:615)
	at top.javarem.domain.strategy.service.rule.tree.impl.LuckAwardLogicTreeNode.execute(LuckAwardLogicTreeNode.java:27)
	at top.javarem.domain.strategy.service.rule.tree.factory.engine.impl.DecisionTreeEngine.process(DecisionTreeEngine.java:44)
	at top.javarem.domain.strategy.service.raffle.DefaultRaffleStrategy.doRaffleLogicTree(DefaultRaffleStrategy.java:55)
	at top.javarem.domain.strategy.service.AbstractRaffleLogic.performRaffle(AbstractRaffleLogic.java:56)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:84)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
24-12-12.20:38:30.014 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:38:30.138 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:39:00.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:39:00.348 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:104
24-12-12.20:39:00.388 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:39:00.447 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:39:30.016 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:39:30.148 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:40:00.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:40:00.080 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:40:00.191 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:40:30.008 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:40:30.154 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:40:59.035 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.20:40:59.079 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.20:40:59.230 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.20:40:59.845 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.20:41:00.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:41:00.086 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:41:00.195 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:41:00.428 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.20:41:00.428 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.20:41:00.685 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-12.20:41:00.693 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-12-12.20:41:07.351 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 16024 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-12.20:41:07.354 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-12.20:41:08.070 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-12.20:41:08.071 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-12.20:41:08.124 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 0 Redis repository interfaces.
24-12-12.20:41:08.537 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-12.20:41:08.608 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-12.20:41:08.645 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-12.20:41:08.645 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-12.20:41:08.796 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-12.20:41:08.796 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1408 ms
24-12-12.20:41:09.018 [main            ] INFO  Version                - Redisson 3.26.0
24-12-12.20:41:09.827 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.20:41:10.235 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.20:41:13.340 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-12.20:41:13.414 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-12.20:41:13.423 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-12.20:41:13.424 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.20:41:13.825 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#5b0dbfb:0/SimpleConnection@733fae8 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 55953]
24-12-12.20:41:14.717 [main            ] INFO  Application            - Started Application in 7.739 seconds (JVM running for 8.972)
24-12-12.20:41:15.861 [RMI TCP Connection(2)-192.168.137.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-12.20:41:15.861 [RMI TCP Connection(2)-192.168.137.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-12.20:41:15.862 [RMI TCP Connection(2)-192.168.137.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-12-12.20:41:15.933 [RMI TCP Connection(3)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-12.20:41:16.789 [RMI TCP Connection(3)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-12.20:41:30.004 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:41:30.214 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:42:00.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:42:00.105 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:42:00.202 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:42:30.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:42:30.065 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:42:38.333 [http-nio-8091-exec-2] INFO  RaffleActivityController -  用户id:100301 活动id:100301
24-12-12.20:42:38.570 [http-nio-8091-exec-2] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=933727404664, orderTime=Sun Dec 08 23:50:16 CST 2024, status=CREATE)
24-12-12.20:42:38.570 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 创建参与记录订单 orderId:933727404664
24-12-12.20:42:38.578 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 开始执行抽奖流程 用户id : rem, 策略id : 100006
24-12-12.20:42:38.867 [http-nio-8091-exec-2] INFO  DefaultLogicNode       - 默认规则接管执行
24-12-12.20:42:38.867 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 责任链获取奖品ID awardId: 103 ruleModel: default
24-12-12.20:42:39.485 [http-nio-8091-exec-2] INFO  LuckAwardLogicTreeNode - 规则过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-12.20:42:39.485 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 规则树逻辑执行 奖品id 101 
24-12-12.20:42:40.033 [http-nio-8091-exec-2] ERROR AwardRepository        - 写入中奖记录，唯一索引冲突 userId: rem activityId: 100301 awardId: 101
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
; Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$ba7d353d.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$c233d225.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:100)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.20:42:40.137 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
top.javarem.types.exception.AppException: null
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:77)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$c233d225.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:100)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
; Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$ba7d353d.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	... 68 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.20:43:00.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:43:00.318 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:103
24-12-12.20:43:00.375 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:43:00.419 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:43:30.005 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:43:30.111 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:44:00.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:44:00.071 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:44:00.116 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:44:30.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:44:30.096 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:45:00.004 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:45:00.099 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:45:00.141 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:45:30.015 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:45:30.140 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:46:00.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:46:00.052 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:46:00.144 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.20:46:30.010 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.20:46:30.105 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.20:46:38.613 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.20:46:38.648 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.20:46:38.657 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.20:46:38.852 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.20:46:39.310 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.20:46:39.310 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.20:46:39.496 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-12.20:46:39.503 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-12-12.22:31:50.395 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 8304 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-12.22:31:50.397 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-12.22:31:51.279 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-12.22:31:51.281 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-12.22:31:51.337 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 0 Redis repository interfaces.
24-12-12.22:31:51.811 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-12.22:31:51.918 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-12.22:31:51.926 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-12.22:31:51.927 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-12.22:31:52.104 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-12.22:31:52.104 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1669 ms
24-12-12.22:31:52.361 [main            ] INFO  Version                - Redisson 3.26.0
24-12-12.22:31:53.087 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.22:31:53.458 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.22:31:56.546 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-12.22:31:56.625 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-12.22:31:56.635 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-12.22:31:56.637 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.22:31:56.843 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#797fcf9:0/SimpleConnection@7ba06506 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 49961]
24-12-12.22:31:57.611 [main            ] INFO  Application            - Started Application in 7.692 seconds (JVM running for 8.956)
24-12-12.22:31:58.194 [RMI TCP Connection(1)-192.168.137.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-12.22:31:58.194 [RMI TCP Connection(1)-192.168.137.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-12.22:31:58.197 [RMI TCP Connection(1)-192.168.137.1] INFO  DispatcherServlet      - Completed initialization in 3 ms
24-12-12.22:31:59.063 [RMI TCP Connection(3)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-12.22:31:59.958 [RMI TCP Connection(3)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-12.22:32:00.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:32:00.052 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:32:00.112 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:32:23.866 [http-nio-8091-exec-2] INFO  RaffleActivityController -  用户id:100301 活动id:100301
24-12-12.22:32:24.091 [http-nio-8091-exec-2] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=933727404664, orderTime=Sun Dec 08 23:50:16 CST 2024, status=CREATE)
24-12-12.22:32:24.092 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 创建参与记录订单 orderId:933727404664
24-12-12.22:32:24.092 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 开始执行抽奖流程 用户id : rem, 策略id : 100006
24-12-12.22:32:24.382 [http-nio-8091-exec-2] INFO  DefaultLogicNode       - 默认规则接管执行
24-12-12.22:32:24.383 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 责任链获取奖品ID awardId: 107 ruleModel: default
24-12-12.22:32:24.690 [http-nio-8091-exec-2] INFO  LockLogicTreeNode      - 规则过滤-奖品锁 用户积分未达到奖品解锁标准
24-12-12.22:32:24.691 [http-nio-8091-exec-2] INFO  LuckAwardLogicTreeNode - 规则过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-12.22:32:24.692 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 规则树逻辑执行 奖品id 101 
24-12-12.22:32:24.979 [http-nio-8091-exec-2] ERROR AwardRepository        - 写入中奖记录，唯一索引冲突 userId: rem activityId: 100301 awardId: 101
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
; Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$d3208799.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$33c9a5d9.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:100)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.22:32:25.102 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
top.javarem.types.exception.AppException: null
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:77)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$33c9a5d9.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:100)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
; Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$d3208799.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	... 68 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.22:32:30.010 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:32:30.117 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:33:00.004 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:33:00.122 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:33:00.161 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:33:30.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:33:30.055 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:34:00.005 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:34:00.128 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:34:00.168 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:34:30.007 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:34:30.132 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:35:00.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:35:00.068 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:35:00.178 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:35:30.002 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:35:30.072 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:36:00.005 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:36:00.072 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:36:00.185 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:36:30.003 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:36:30.143 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:37:00.007 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:37:00.150 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:37:00.187 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:37:30.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:37:30.084 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:37:32.248 [http-nio-8091-exec-6] INFO  RaffleActivityController -  用户id:100301 活动id:100301
24-12-12.22:37:32.411 [http-nio-8091-exec-6] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=933727404664, orderTime=Sun Dec 08 23:50:16 CST 2024, status=CREATE)
24-12-12.22:37:32.411 [http-nio-8091-exec-6] INFO  RaffleActivityController - 活动抽奖 创建参与记录订单 orderId:933727404664
24-12-12.22:37:32.411 [http-nio-8091-exec-6] INFO  AbstractRaffleLogic    - 开始执行抽奖流程 用户id : rem, 策略id : 100006
24-12-12.22:37:32.648 [http-nio-8091-exec-6] INFO  DefaultLogicNode       - 默认规则接管执行
24-12-12.22:37:32.648 [http-nio-8091-exec-6] INFO  AbstractRaffleLogic    - 责任链获取奖品ID awardId: 103 ruleModel: default
24-12-12.22:37:33.062 [http-nio-8091-exec-6] INFO  LuckAwardLogicTreeNode - 规则过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-12.22:37:33.062 [http-nio-8091-exec-6] INFO  AbstractRaffleLogic    - 规则树逻辑执行 奖品id 101 
24-12-12.22:37:33.268 [http-nio-8091-exec-6] ERROR AwardRepository        - 写入中奖记录，唯一索引冲突 userId: rem activityId: 100301 awardId: 101
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
; Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$d3208799.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$33c9a5d9.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:100)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.22:37:33.380 [http-nio-8091-exec-6] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
top.javarem.types.exception.AppException: null
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:77)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$33c9a5d9.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:100)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
; Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$d3208799.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	... 68 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.22:37:42.797 [http-nio-8091-exec-5] INFO  RaffleActivityController -  用户id:100301 活动id:100301
24-12-12.22:37:42.958 [http-nio-8091-exec-5] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=933727404664, orderTime=Sun Dec 08 23:50:16 CST 2024, status=CREATE)
24-12-12.22:37:42.958 [http-nio-8091-exec-5] INFO  RaffleActivityController - 活动抽奖 创建参与记录订单 orderId:933727404664
24-12-12.22:37:42.958 [http-nio-8091-exec-5] INFO  AbstractRaffleLogic    - 开始执行抽奖流程 用户id : rem, 策略id : 100006
24-12-12.22:37:43.193 [http-nio-8091-exec-5] INFO  DefaultLogicNode       - 默认规则接管执行
24-12-12.22:37:43.193 [http-nio-8091-exec-5] INFO  AbstractRaffleLogic    - 责任链获取奖品ID awardId: 104 ruleModel: default
24-12-12.22:37:43.502 [http-nio-8091-exec-5] INFO  LuckAwardLogicTreeNode - 规则过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-12.22:37:43.502 [http-nio-8091-exec-5] INFO  AbstractRaffleLogic    - 规则树逻辑执行 奖品id 101 
24-12-12.22:37:43.712 [http-nio-8091-exec-5] ERROR AwardRepository        - 写入中奖记录，唯一索引冲突 userId: rem activityId: 100301 awardId: 101
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
; Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$d3208799.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$33c9a5d9.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:100)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.22:37:43.814 [http-nio-8091-exec-5] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
top.javarem.types.exception.AppException: null
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:77)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$33c9a5d9.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:100)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
; Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$d3208799.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	... 68 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '933727404664' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.22:38:00.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:38:00.087 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:38:00.362 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:103
24-12-12.22:38:00.565 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:104
24-12-12.22:38:00.601 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:38:30.004 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:38:30.101 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:39:00.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:39:00.060 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:39:00.163 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:39:30.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:39:30.065 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:40:00.005 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:40:00.067 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:40:00.107 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:40:30.016 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:40:30.115 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:41:00.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:41:00.075 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:41:00.177 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:41:30.002 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:41:30.079 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:42:00.011 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:42:00.126 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:42:00.185 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:42:30.012 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:42:30.086 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:43:00.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:43:00.040 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:43:00.122 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:43:30.012 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:43:30.137 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:44:00.011 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:44:00.141 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:44:00.200 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:44:30.007 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:44:30.141 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:45:00.001 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:45:00.104 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:45:00.138 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:45:30.001 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:45:30.108 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:46:00.001 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:46:00.110 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:46:00.147 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:46:30.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:46:30.049 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:47:00.002 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:47:00.119 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:47:00.157 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:47:30.001 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:47:30.122 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:48:00.006 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:48:00.125 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:48:00.162 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:48:02.618 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.22:48:02.687 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.22:48:02.689 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.22:48:02.889 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.22:48:03.384 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.22:48:03.384 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.22:48:03.652 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-12.22:48:03.660 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-12-12.22:48:13.497 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 17580 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-12.22:48:13.499 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-12.22:48:14.221 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-12.22:48:14.222 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-12.22:48:14.275 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 0 Redis repository interfaces.
24-12-12.22:48:14.712 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-12.22:48:14.817 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-12.22:48:14.824 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-12.22:48:14.824 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-12.22:48:14.975 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-12.22:48:14.975 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1440 ms
24-12-12.22:48:15.200 [main            ] INFO  Version                - Redisson 3.26.0
24-12-12.22:48:16.036 [redisson-netty-1-8] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.22:48:16.341 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.22:48:19.512 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-12.22:48:19.587 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-12.22:48:19.596 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-12.22:48:19.597 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.22:48:19.826 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#15d114ce:0/SimpleConnection@63dc3420 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 50291]
24-12-12.22:48:20.454 [main            ] INFO  Application            - Started Application in 7.344 seconds (JVM running for 8.559)
24-12-12.22:48:21.140 [RMI TCP Connection(1)-192.168.137.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-12.22:48:21.141 [RMI TCP Connection(1)-192.168.137.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-12.22:48:21.143 [RMI TCP Connection(1)-192.168.137.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
24-12-12.22:48:21.175 [RMI TCP Connection(2)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-12.22:48:22.042 [RMI TCP Connection(2)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-12.22:48:30.005 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:48:30.186 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:49:00.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:49:00.069 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:49:00.176 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:49:30.005 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:49:30.069 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:50:00.010 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:50:00.139 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:50:00.179 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:50:30.002 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:50:30.080 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:51:00.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:51:00.077 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:51:00.146 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:51:00.438 [http-nio-8091-exec-3] INFO  RaffleActivityController -  用户id:100301 活动id:100301
24-12-12.22:51:00.601 [http-nio-8091-exec-3] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserRaffleConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=406284951110, orderTime=Sun Dec 08 15:11:29 CST 2024, status=CREATE)
24-12-12.22:51:00.601 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖 创建参与记录订单 orderId:406284951110
24-12-12.22:51:00.602 [http-nio-8091-exec-3] INFO  AbstractRaffleLogic    - 开始执行抽奖流程 用户id : rem, 策略id : 100006
24-12-12.22:51:00.863 [http-nio-8091-exec-3] INFO  DefaultLogicNode       - 默认规则接管执行
24-12-12.22:51:00.864 [http-nio-8091-exec-3] INFO  AbstractRaffleLogic    - 责任链获取奖品ID awardId: 101 ruleModel: default
24-12-12.22:51:01.312 [http-nio-8091-exec-3] INFO  LuckAwardLogicTreeNode - 规则过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-12.22:51:01.312 [http-nio-8091-exec-3] INFO  AbstractRaffleLogic    - 规则树逻辑执行 奖品id 101 
24-12-12.22:51:01.787 [http-nio-8091-exec-3] INFO  EventPublisher         - 发送MQ消息 topic: send_award message: {"eventId":"IwsVaLNnQSh","timestamp":"Dec 12, 2024 10:51:01 PM","data":{"awardId":101,"userId":"rem","awardTitle":"随机积分"}}
24-12-12.22:51:01.863 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"eventId":"IwsVaLNnQSh","timestamp":"Dec 12, 2024 10:51:01 PM","data":{"awardId":101,"userId":"rem","awardTitle":"随机积分"}}
24-12-12.22:51:01.887 [http-nio-8091-exec-3] INFO  AwardRepository        - 写入中奖记录，发送MQ消息完成 userId: rem orderId:406284951110 topic: send_award
24-12-12.22:51:30.000 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:51:30.083 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:52:00.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:52:00.357 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:101
24-12-12.22:52:00.404 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:52:00.460 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:52:30.011 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:52:30.157 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:53:00.001 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:53:00.105 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:53:00.161 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:53:30.005 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:53:30.105 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:54:00.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:54:00.065 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:54:00.168 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:54:30.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:54:30.068 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:55:00.007 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:55:00.121 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:55:00.175 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:55:30.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:55:30.076 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:56:00.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:56:00.079 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:56:00.116 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:56:30.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:56:30.082 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:57:00.002 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:57:00.085 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:57:00.122 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:57:25.508 [http-nio-8091-exec-5] INFO  RaffleActivityController -  用户id:100301 活动id:100301
24-12-12.22:57:25.686 [http-nio-8091-exec-5] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserRaffleConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=406284951110, orderTime=Sun Dec 08 15:11:29 CST 2024, status=CREATE)
24-12-12.22:57:25.686 [http-nio-8091-exec-5] INFO  RaffleActivityController - 活动抽奖 创建参与记录订单 orderId:406284951110
24-12-12.22:57:25.686 [http-nio-8091-exec-5] INFO  AbstractRaffleLogic    - 开始执行抽奖流程 用户id : rem, 策略id : 100006
24-12-12.22:57:25.927 [http-nio-8091-exec-5] INFO  DefaultLogicNode       - 默认规则接管执行
24-12-12.22:57:25.928 [http-nio-8091-exec-5] INFO  AbstractRaffleLogic    - 责任链获取奖品ID awardId: 105 ruleModel: default
24-12-12.22:57:26.238 [http-nio-8091-exec-5] INFO  LuckAwardLogicTreeNode - 规则过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-12.22:57:26.239 [http-nio-8091-exec-5] INFO  AbstractRaffleLogic    - 规则树逻辑执行 奖品id 101 
24-12-12.22:57:26.650 [http-nio-8091-exec-5] INFO  EventPublisher         - 发送MQ消息 topic: send_award message: {"eventId":"0bXja3DpqPJ","timestamp":"Dec 12, 2024 10:57:26 PM","data":{"awardId":101,"userId":"rem","awardTitle":"随机积分"}}
24-12-12.22:57:26.711 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"eventId":"0bXja3DpqPJ","timestamp":"Dec 12, 2024 10:57:26 PM","data":{"awardId":101,"userId":"rem","awardTitle":"随机积分"}}
24-12-12.22:57:26.757 [http-nio-8091-exec-5] INFO  AwardRepository        - 写入中奖记录，发送MQ消息完成 userId: rem orderId:406284951110 topic: send_award
24-12-12.22:57:30.013 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:57:30.140 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:58:00.012 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:58:00.297 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:105
24-12-12.22:58:00.334 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:58:00.400 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:58:30.011 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:58:30.140 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:59:00.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.22:59:00.048 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:59:00.144 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.22:59:30.012 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.22:59:30.146 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:00:00.001 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:00:00.039 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:00:00.152 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:00:30.008 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:00:30.110 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:01:00.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:01:00.048 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:01:00.157 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:01:30.002 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:01:30.117 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:02:00.012 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:02:00.120 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:02:00.161 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:02:30.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:02:30.057 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:03:00.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:03:00.060 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:03:00.171 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:03:30.007 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:03:30.132 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:04:00.014 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:04:00.136 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:04:00.172 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:04:30.001 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:04:30.070 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:05:00.006 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:05:00.141 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:05:00.179 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:05:30.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:05:30.078 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:06:00.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:06:00.083 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:06:00.193 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:06:30.003 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:06:30.153 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:07:00.009 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:07:00.155 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:07:00.196 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:07:30.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:07:30.093 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:08:00.012 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:08:00.061 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:08:00.163 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:08:30.002 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:08:30.065 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:09:00.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:09:00.067 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:09:00.107 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:09:30.009 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:09:30.116 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:10:00.011 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:10:00.119 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:10:00.178 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:10:30.011 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:10:30.122 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:11:00.004 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:11:00.126 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:11:00.184 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:11:30.012 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:11:30.085 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:12:00.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:12:00.089 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:12:00.191 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:12:30.001 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:12:30.040 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:13:00.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:13:00.045 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:13:00.141 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:13:30.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:13:30.046 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:14:00.001 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:14:00.104 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:14:00.141 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:14:30.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:14:30.044 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:15:00.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:15:00.042 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:15:00.155 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:15:30.002 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:15:30.114 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:16:00.005 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:16:00.117 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:16:00.156 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:16:30.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:16:30.053 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:17:00.014 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:17:00.124 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:17:00.164 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:17:30.012 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:17:30.128 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:18:00.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:18:00.063 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:18:00.132 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:18:30.010 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:18:30.135 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:19:00.016 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:19:00.138 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:19:00.174 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:19:30.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:19:30.076 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:19:46.760 [http-nio-8091-exec-8] INFO  RaffleActivityController -  用户id:100301 活动id:100301
24-12-12.23:19:46.935 [http-nio-8091-exec-8] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserRaffleConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=406284951110, orderTime=Sun Dec 08 15:11:29 CST 2024, status=CREATE)
24-12-12.23:19:46.935 [http-nio-8091-exec-8] INFO  RaffleActivityController - 活动抽奖 创建参与记录订单 orderId:406284951110
24-12-12.23:19:46.935 [http-nio-8091-exec-8] INFO  AbstractRaffleLogic    - 开始执行抽奖流程 用户id : rem, 策略id : 100006
24-12-12.23:19:47.176 [http-nio-8091-exec-8] INFO  DefaultLogicNode       - 默认规则接管执行
24-12-12.23:19:47.176 [http-nio-8091-exec-8] INFO  AbstractRaffleLogic    - 责任链获取奖品ID awardId: 105 ruleModel: default
24-12-12.23:19:47.486 [http-nio-8091-exec-8] INFO  LuckAwardLogicTreeNode - 规则过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-12.23:19:47.486 [http-nio-8091-exec-8] INFO  AbstractRaffleLogic    - 规则树逻辑执行 奖品id 101 
24-12-12.23:19:47.732 [http-nio-8091-exec-8] ERROR AwardRepository        - 写入中奖记录，唯一索引冲突 userId: rem activityId: 100301 awardId: 101
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
; Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$d3208799.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$f49742e3.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.23:19:47.861 [http-nio-8091-exec-8] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
top.javarem.types.exception.AppException: null
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:77)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$f49742e3.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
; Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$d3208799.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	... 68 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.23:20:00.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:20:00.080 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:20:00.186 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:20:06.701 [http-nio-8091-exec-9] INFO  RaffleActivityController -  用户id:100301 活动id:100301
24-12-12.23:20:06.841 [http-nio-8091-exec-9] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserRaffleConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=406284951110, orderTime=Sun Dec 08 15:11:29 CST 2024, status=CREATE)
24-12-12.23:20:06.841 [http-nio-8091-exec-9] INFO  RaffleActivityController - 活动抽奖 创建参与记录订单 orderId:406284951110
24-12-12.23:20:06.841 [http-nio-8091-exec-9] INFO  AbstractRaffleLogic    - 开始执行抽奖流程 用户id : rem, 策略id : 100006
24-12-12.23:20:07.108 [http-nio-8091-exec-9] INFO  DefaultLogicNode       - 默认规则接管执行
24-12-12.23:20:07.108 [http-nio-8091-exec-9] INFO  AbstractRaffleLogic    - 责任链获取奖品ID awardId: 104 ruleModel: default
24-12-12.23:20:07.415 [http-nio-8091-exec-9] INFO  LuckAwardLogicTreeNode - 规则过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-12.23:20:07.415 [http-nio-8091-exec-9] INFO  AbstractRaffleLogic    - 规则树逻辑执行 奖品id 101 
24-12-12.23:20:07.621 [http-nio-8091-exec-9] ERROR AwardRepository        - 写入中奖记录，唯一索引冲突 userId: rem activityId: 100301 awardId: 101
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
; Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$d3208799.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$f49742e3.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.23:20:07.722 [http-nio-8091-exec-9] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
top.javarem.types.exception.AppException: null
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:77)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$f49742e3.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
; Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$d3208799.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	... 68 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.23:20:30.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:20:30.086 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:20:43.291 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.23:20:43.359 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.23:20:43.699 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.23:20:43.903 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.23:20:44.359 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.23:20:44.360 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.23:20:44.536 [redisson-netty-1-3] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0xc4089437, L:/192.168.5.22:50284 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-12.23:20:44.588 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-12.23:20:44.594 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-12-12.23:20:52.323 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 9360 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-12.23:20:52.326 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-12.23:20:53.045 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-12.23:20:53.046 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-12.23:20:53.099 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 0 Redis repository interfaces.
24-12-12.23:20:53.508 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-12.23:20:53.611 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-12.23:20:53.618 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-12.23:20:53.618 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-12.23:20:53.800 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-12.23:20:53.800 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1442 ms
24-12-12.23:20:54.020 [main            ] INFO  Version                - Redisson 3.26.0
24-12-12.23:20:54.830 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.23:20:55.177 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.23:20:58.279 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-12.23:20:58.353 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-12.23:20:58.362 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-12.23:20:58.364 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:20:58.621 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3312f4f4:0/SimpleConnection@525b8922 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 50627]
24-12-12.23:20:59.284 [main            ] INFO  Application            - Started Application in 7.34 seconds (JVM running for 8.529)
24-12-12.23:21:00.004 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:21:00.023 [scheduling-1    ] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-12.23:21:00.136 [RMI TCP Connection(1)-192.168.137.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-12.23:21:00.136 [RMI TCP Connection(1)-192.168.137.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-12.23:21:00.137 [RMI TCP Connection(1)-192.168.137.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-12-12.23:21:00.811 [scheduling-1    ] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-12.23:21:00.927 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:21:01.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:21:23.175 [http-nio-8091-exec-3] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-12.23:21:23.400 [http-nio-8091-exec-3] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserRaffleConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=406284951110, orderTime=Sun Dec 08 15:11:29 CST 2024, status=CREATE)
24-12-12.23:21:23.400 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:406284951110
24-12-12.23:21:23.401 [http-nio-8091-exec-3] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-12.23:21:23.645 [http-nio-8091-exec-3] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-12.23:21:23.647 [http-nio-8091-exec-3] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 103 ruleModel: default
24-12-12.23:21:24.052 [http-nio-8091-exec-3] INFO  LuckAwardLogicTreeNode - 规则树过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-12.23:21:24.053 [http-nio-8091-exec-3] INFO  AbstractRaffleLogic    - 规则树逻辑执行完毕执行- 结果为 奖品id 101 
24-12-12.23:21:24.356 [http-nio-8091-exec-3] ERROR AwardRepository        - 写入中奖记录，唯一索引冲突 userId: rem activityId: 100301 awardId: 101
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
; Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$3bd92597.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$5d1f7478.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.23:21:24.463 [http-nio-8091-exec-3] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
top.javarem.types.exception.AppException: null
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:77)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$5d1f7478.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
; Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$3bd92597.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	... 68 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.23:21:30.005 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:21:30.089 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:22:00.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:22:00.261 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:105
24-12-12.23:22:00.466 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:104
24-12-12.23:22:00.671 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:103
24-12-12.23:22:00.714 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:22:00.774 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:22:30.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:22:30.061 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:22:38.782 [http-nio-8091-exec-5] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-12.23:22:38.906 [http-nio-8091-exec-5] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserRaffleConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=406284951110, orderTime=Sun Dec 08 15:11:29 CST 2024, status=USED)
24-12-12.23:22:38.906 [http-nio-8091-exec-5] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:406284951110
24-12-12.23:22:38.906 [http-nio-8091-exec-5] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-12.23:22:39.174 [http-nio-8091-exec-5] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-12.23:22:39.174 [http-nio-8091-exec-5] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 105 ruleModel: default
24-12-12.23:22:39.481 [http-nio-8091-exec-5] INFO  LuckAwardLogicTreeNode - 规则树过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-12.23:22:39.481 [http-nio-8091-exec-5] INFO  AbstractRaffleLogic    - 规则树逻辑执行完毕执行- 结果为 奖品id 101 
24-12-12.23:22:39.687 [http-nio-8091-exec-5] ERROR AwardRepository        - 写入中奖记录，唯一索引冲突 userId: rem activityId: 100301 awardId: 101
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
; Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$3bd92597.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$5d1f7478.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.23:22:39.789 [http-nio-8091-exec-5] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
top.javarem.types.exception.AppException: null
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:77)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$5d1f7478.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
; Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$3bd92597.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	... 68 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.23:22:41.557 [http-nio-8091-exec-8] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-12.23:22:41.735 [http-nio-8091-exec-8] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserRaffleConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=406284951110, orderTime=Sun Dec 08 15:11:29 CST 2024, status=USED)
24-12-12.23:22:41.735 [http-nio-8091-exec-8] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:406284951110
24-12-12.23:22:41.735 [http-nio-8091-exec-8] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-12.23:22:41.979 [http-nio-8091-exec-8] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-12.23:22:41.982 [http-nio-8091-exec-8] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 104 ruleModel: default
24-12-12.23:22:42.289 [http-nio-8091-exec-8] INFO  LuckAwardLogicTreeNode - 规则树过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-12.23:22:42.289 [http-nio-8091-exec-8] INFO  AbstractRaffleLogic    - 规则树逻辑执行完毕执行- 结果为 奖品id 101 
24-12-12.23:22:42.489 [http-nio-8091-exec-8] ERROR AwardRepository        - 写入中奖记录，唯一索引冲突 userId: rem activityId: 100301 awardId: 101
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
; Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$3bd92597.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$5d1f7478.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.23:22:42.590 [http-nio-8091-exec-8] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
top.javarem.types.exception.AppException: null
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:77)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$5d1f7478.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
; Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$3bd92597.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	... 68 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.23:22:48.682 [http-nio-8091-exec-9] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-12.23:22:48.838 [http-nio-8091-exec-9] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserRaffleConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=406284951110, orderTime=Sun Dec 08 15:11:29 CST 2024, status=USED)
24-12-12.23:22:48.838 [http-nio-8091-exec-9] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:406284951110
24-12-12.23:22:48.838 [http-nio-8091-exec-9] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-12.23:22:49.107 [http-nio-8091-exec-9] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-12.23:22:49.107 [http-nio-8091-exec-9] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 103 ruleModel: default
24-12-12.23:22:49.415 [http-nio-8091-exec-9] INFO  LuckAwardLogicTreeNode - 规则树过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-12.23:22:49.415 [http-nio-8091-exec-9] INFO  AbstractRaffleLogic    - 规则树逻辑执行完毕执行- 结果为 奖品id 101 
24-12-12.23:22:49.619 [http-nio-8091-exec-9] ERROR AwardRepository        - 写入中奖记录，唯一索引冲突 userId: rem activityId: 100301 awardId: 101
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
; Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$3bd92597.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$5d1f7478.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.23:22:49.721 [http-nio-8091-exec-9] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
top.javarem.types.exception.AppException: null
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:77)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$5d1f7478.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
; Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$3bd92597.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	... 68 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.23:22:58.178 [http-nio-8091-exec-10] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-12.23:22:58.360 [http-nio-8091-exec-10] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserRaffleConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=406284951110, orderTime=Sun Dec 08 15:11:29 CST 2024, status=USED)
24-12-12.23:22:58.360 [http-nio-8091-exec-10] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:406284951110
24-12-12.23:22:58.360 [http-nio-8091-exec-10] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-12.23:22:58.630 [http-nio-8091-exec-10] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-12.23:22:58.630 [http-nio-8091-exec-10] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 105 ruleModel: default
24-12-12.23:22:58.937 [http-nio-8091-exec-10] INFO  LuckAwardLogicTreeNode - 规则树过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-12.23:22:58.938 [http-nio-8091-exec-10] INFO  AbstractRaffleLogic    - 规则树逻辑执行完毕执行- 结果为 奖品id 101 
24-12-12.23:22:59.142 [http-nio-8091-exec-10] ERROR AwardRepository        - 写入中奖记录，唯一索引冲突 userId: rem activityId: 100301 awardId: 101
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
; Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$3bd92597.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$5d1f7478.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.23:22:59.244 [http-nio-8091-exec-10] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
top.javarem.types.exception.AppException: null
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:77)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$5d1f7478.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
; Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$3bd92597.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	... 68 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '406284951110' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-12.23:23:00.008 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:23:00.103 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:23:00.308 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:105
24-12-12.23:23:00.515 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:104
24-12-12.23:23:00.723 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:103
24-12-12.23:23:00.781 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:23:30.015 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:23:30.106 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:24:00.003 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:24:00.110 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:24:00.317 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:105
24-12-12.23:24:00.379 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:24:30.005 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:24:30.115 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:25:00.016 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:25:00.118 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:25:00.181 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:25:30.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:25:30.082 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:25:55.006 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.23:25:55.068 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.23:25:55.683 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.23:25:55.684 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.23:25:56.139 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.23:25:56.140 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.23:25:56.346 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-12.23:25:56.351 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-12-12.23:26:03.814 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 13468 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-12.23:26:03.816 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-12.23:26:04.551 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-12.23:26:04.554 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-12.23:26:04.607 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 0 Redis repository interfaces.
24-12-12.23:26:05.080 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-12.23:26:05.185 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-12.23:26:05.191 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-12.23:26:05.191 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-12.23:26:05.379 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-12.23:26:05.379 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1527 ms
24-12-12.23:26:05.608 [main            ] INFO  Version                - Redisson 3.26.0
24-12-12.23:26:06.376 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.23:26:06.743 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.23:26:09.999 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-12.23:26:10.074 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-12.23:26:10.083 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-12.23:26:10.085 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:26:10.330 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#5b0dbfb:0/SimpleConnection@733fae8 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 50761]
24-12-12.23:26:10.996 [main            ] INFO  Application            - Started Application in 7.558 seconds (JVM running for 8.786)
24-12-12.23:26:12.402 [RMI TCP Connection(2)-192.168.137.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-12.23:26:12.402 [RMI TCP Connection(2)-192.168.137.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-12.23:26:12.404 [RMI TCP Connection(2)-192.168.137.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
24-12-12.23:26:12.491 [RMI TCP Connection(3)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-12.23:26:13.403 [RMI TCP Connection(3)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-12.23:26:22.208 [http-nio-8091-exec-2] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-12.23:26:22.422 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
	at java.util.ArrayList.rangeCheck(ArrayList.java:657)
	at java.util.ArrayList.get(ArrayList.java:433)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository.getUserUnconsumedOrder(ActivityRepository.java:269)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$FastClassBySpringCGLIB$$ae16c582.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$a845c411.getUserUnconsumedOrder(<generated>)
	at top.javarem.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:48)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:75)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
24-12-12.23:26:30.014 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:26:30.132 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:26:59.890 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.23:26:59.927 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.23:27:00.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:27:00.093 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:27:00.140 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:27:00.236 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.23:27:00.437 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.23:27:00.885 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.23:27:00.885 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.23:27:01.126 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-12.23:27:01.134 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-12-12.23:27:08.530 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 3928 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-12.23:27:08.532 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-12.23:27:09.240 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-12.23:27:09.241 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-12.23:27:09.294 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 0 Redis repository interfaces.
24-12-12.23:27:09.701 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-12.23:27:09.805 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-12.23:27:09.812 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-12.23:27:09.812 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-12.23:27:10.001 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-12.23:27:10.001 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1435 ms
24-12-12.23:27:10.231 [main            ] INFO  Version                - Redisson 3.26.0
24-12-12.23:27:10.990 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.23:27:11.357 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.23:27:14.592 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-12.23:27:14.668 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-12.23:27:14.677 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-12.23:27:14.678 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:27:14.943 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#5b0dbfb:0/SimpleConnection@733fae8 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 50869]
24-12-12.23:27:15.616 [main            ] INFO  Application            - Started Application in 7.445 seconds (JVM running for 8.623)
24-12-12.23:27:16.592 [RMI TCP Connection(2)-192.168.137.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-12.23:27:16.592 [RMI TCP Connection(2)-192.168.137.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-12.23:27:16.595 [RMI TCP Connection(2)-192.168.137.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
24-12-12.23:27:16.641 [RMI TCP Connection(1)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-12.23:27:17.548 [RMI TCP Connection(1)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-12.23:27:30.008 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:27:30.161 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:27:31.108 [http-nio-8091-exec-2] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-12.23:27:32.049 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
org.springframework.jdbc.BadSqlGrammarException: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', update_time = now()       WHERE  (user_id = 'rem' AND activity_id = 100301 AND' at line 1
### The error may exist in top/javarem/infrastructure/dao/mapper/RaffleActivityAccountMonthCountMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.RaffleActivityAccountMonthCountMapper.update-Inline
### The error occurred while setting parameters
### SQL: UPDATE raffle_activity_account_month_count  SET month_count_surplus = month_count_surplus - 1, , update_time = now()       WHERE  (user_id = ? AND activity_id = ? AND month = ?)
### Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', update_time = now()       WHERE  (user_id = 'rem' AND activity_id = 100301 AND' at line 1
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', update_time = now()       WHERE  (user_id = 'rem' AND activity_id = 100301 AND' at line 1
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:239)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:288)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:64)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy101.update(Unknown Source)
	at com.baomidou.mybatisplus.extension.conditions.update.ChainUpdate.lambda$update$eb4b7d7c$1(ChainUpdate.java:46)
	at com.baomidou.mybatisplus.extension.conditions.ChainWrapper.execute(ChainWrapper.java:63)
	at com.baomidou.mybatisplus.extension.conditions.update.ChainUpdate.update(ChainUpdate.java:46)
	at com.baomidou.mybatisplus.extension.conditions.update.ChainUpdate.update(ChainUpdate.java:36)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository.lambda$saveCreatePartakeOrderAggregate$1(ActivityRepository.java:371)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository.saveCreatePartakeOrderAggregate(ActivityRepository.java:348)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$FastClassBySpringCGLIB$$ae16c582.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$a845c411.saveCreatePartakeOrderAggregate(<generated>)
	at top.javarem.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:64)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:75)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', update_time = now()       WHERE  (user_id = 'rem' AND activity_id = 100301 AND' at line 1
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 79 common frames omitted
24-12-12.23:28:00.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:28:00.099 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:28:00.134 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:28:30.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:28:30.051 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:29:00.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:29:00.048 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:29:00.108 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:29:30.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:29:30.056 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:29:49.404 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.23:29:49.465 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.23:29:49.716 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.23:29:50.079 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.23:29:50.552 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.23:29:50.552 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.23:29:50.767 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-12.23:29:50.772 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-12-12.23:29:58.161 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 348 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-12.23:29:58.164 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-12.23:29:58.874 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-12.23:29:58.875 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-12.23:29:58.928 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 0 Redis repository interfaces.
24-12-12.23:29:59.340 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-12.23:29:59.441 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-12.23:29:59.448 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-12.23:29:59.448 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-12.23:29:59.595 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-12.23:29:59.596 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1397 ms
24-12-12.23:29:59.818 [main            ] INFO  Version                - Redisson 3.26.0
24-12-12.23:30:00.626 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.23:30:01.036 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-12.23:30:04.176 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-12.23:30:04.253 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-12.23:30:04.261 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-12.23:30:04.262 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:30:04.565 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3312f4f4:0/SimpleConnection@145a821d [delegate=amqp://lain@110.41.180.185:5672/, localPort= 51000]
24-12-12.23:30:05.254 [main            ] INFO  Application            - Started Application in 7.45 seconds (JVM running for 8.621)
24-12-12.23:30:05.876 [RMI TCP Connection(1)-192.168.137.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-12.23:30:05.876 [RMI TCP Connection(1)-192.168.137.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-12.23:30:05.878 [RMI TCP Connection(1)-192.168.137.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
24-12-12.23:30:05.963 [RMI TCP Connection(2)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-12.23:30:06.777 [RMI TCP Connection(2)-192.168.137.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-12.23:30:25.469 [http-nio-8091-exec-2] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-12.23:30:26.466 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:058163794197
24-12-12.23:30:26.468 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-12.23:30:26.739 [http-nio-8091-exec-2] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-12.23:30:26.740 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 106 ruleModel: default
24-12-12.23:30:26.852 [http-nio-8091-exec-2] INFO  LockLogicTreeNode      - 规则树过滤-奖品锁 用户积分未达到奖品解锁标准
24-12-12.23:30:26.853 [http-nio-8091-exec-2] INFO  LuckAwardLogicTreeNode - 规则树过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-12.23:30:26.854 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 规则树逻辑执行完毕执行- 结果为 奖品id 101 
24-12-12.23:30:27.287 [http-nio-8091-exec-2] INFO  EventPublisher         - 发送MQ消息 topic: send_award message: {"eventId":"6njWXGUgesv","timestamp":"Dec 12, 2024 11:30:26 PM","data":{"awardId":101,"userId":"rem","awardTitle":"随机积分"}}
24-12-12.23:30:27.359 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"eventId":"6njWXGUgesv","timestamp":"Dec 12, 2024 11:30:26 PM","data":{"awardId":101,"userId":"rem","awardTitle":"随机积分"}}
24-12-12.23:30:27.391 [http-nio-8091-exec-2] INFO  AwardRepository        - 写入中奖记录，发送MQ消息完成 userId: rem orderId:058163794197 topic: send_award
24-12-12.23:30:30.013 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:30:30.123 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:31:00.006 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:31:00.122 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:31:00.159 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:31:30.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:31:30.056 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:31:55.009 [AMQP Connection 110.41.180.185:5672] WARN  ForgivingExceptionHandler - An unexpected connection driver error occurred (Exception message: Connection reset)
24-12-12.23:31:55.029 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SimpleMessageListenerContainer - Restarting Consumer@2a5c6b76: tags=[[amq.ctag-FzzWI4JtG8GD-HeluKWN0Q]], channel=Cached Rabbit Channel: AMQChannel(amqp://lain@110.41.180.185:5672/,2), conn: Proxy@1eb906f3 Shared Rabbit Connection: SimpleConnection@145a821d [delegate=amqp://lain@110.41.180.185:5672/, localPort= 51000], acknowledgeMode=AUTO local queue size=0
24-12-12.23:31:55.034 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:31:55.039 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
org.springframework.amqp.AmqpIOException: java.net.NoRouteToHostException: No route to host: connect
	at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:70)
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:603)
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:725)
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createBareChannel(CachingConnectionFactory.java:676)
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.getCachedChannelProxy(CachingConnectionFactory.java:650)
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.getChannel(CachingConnectionFactory.java:540)
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.access$1600(CachingConnectionFactory.java:100)
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory$ChannelCachingConnectionProxy.createChannel(CachingConnectionFactory.java:1418)
	at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2216)
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2183)
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2163)
	at org.springframework.amqp.rabbit.core.RabbitAdmin.getQueueInfo(RabbitAdmin.java:463)
	at org.springframework.amqp.rabbit.core.RabbitAdmin.getQueueProperties(RabbitAdmin.java:447)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.attemptDeclarations(AbstractMessageListenerContainer.java:1942)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.redeclareElementsIfNecessary(AbstractMessageListenerContainer.java:1915)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.initialize(SimpleMessageListenerContainer.java:1384)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1230)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.net.NoRouteToHostException: No route to host: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at com.rabbitmq.client.impl.SocketFrameHandlerFactory.create(SocketFrameHandlerFactory.java:60)
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1223)
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1173)
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:641)
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:616)
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:566)
	... 16 common frames omitted
24-12-12.23:31:55.039 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:31:55.957 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  SimpleMessageListenerContainer - Restarting Consumer@1d7f2f0a: tags=[[amq.ctag-dJhY4f-0fbUXXr7rbAIgkg]], channel=Cached Rabbit Channel: AMQChannel(amqp://lain@110.41.180.185:5672/,1), conn: Proxy@1eb906f3 Shared Rabbit Connection: null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:31:55.960 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:31:55.961 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
org.springframework.amqp.AmqpIOException: java.net.NoRouteToHostException: No route to host: connect
	at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:70)
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:603)
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:725)
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:252)
	at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2210)
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2183)
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2163)
	at org.springframework.amqp.rabbit.core.RabbitAdmin.getQueueInfo(RabbitAdmin.java:463)
	at org.springframework.amqp.rabbit.core.RabbitAdmin.getQueueProperties(RabbitAdmin.java:447)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.attemptDeclarations(AbstractMessageListenerContainer.java:1942)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.redeclareElementsIfNecessary(AbstractMessageListenerContainer.java:1915)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.initialize(SimpleMessageListenerContainer.java:1384)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1230)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.net.NoRouteToHostException: No route to host: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at com.rabbitmq.client.impl.SocketFrameHandlerFactory.create(SocketFrameHandlerFactory.java:60)
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1223)
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1173)
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:641)
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:616)
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:566)
	... 12 common frames omitted
24-12-12.23:31:55.961 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:00.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:32:00.151 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Restarting Consumer@7d4fb743: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:00.153 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:00.155 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:00.155 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:01.090 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Restarting Consumer@2a4855ae: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:01.092 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:01.093 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:01.097 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:05.287 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] INFO  SimpleMessageListenerContainer - Restarting Consumer@68db4e35: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:05.289 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-4] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:05.289 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-4] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:05.290 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-4] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:06.199 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] INFO  SimpleMessageListenerContainer - Restarting Consumer@5f213b34: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:06.202 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-4] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:06.203 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-4] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:06.203 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-4] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:10.385 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-4] INFO  SimpleMessageListenerContainer - Restarting Consumer@3172ac56: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:10.388 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-5] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:10.389 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-5] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:10.389 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-5] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:11.312 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-4] INFO  SimpleMessageListenerContainer - Restarting Consumer@30c4ae4d: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:11.316 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-5] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:11.316 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-5] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:11.317 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-5] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:15.493 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-5] INFO  SimpleMessageListenerContainer - Restarting Consumer@6ca41650: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:15.498 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-6] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:15.509 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-6] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:15.510 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-6] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:15.643 [scheduling-1    ] ERROR UpdateAwardStockJob    - 扣减库存失败
24-12-12.23:32:15.644 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:32:16.415 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-5] INFO  SimpleMessageListenerContainer - Restarting Consumer@3437eb16: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:16.418 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-6] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:16.419 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-6] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:16.419 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-6] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:19.256 [redisson-netty-1-12] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0x886524e3, L:/192.168.5.22:50995 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-12.23:32:20.011 [redisson-netty-1-2] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0x37df9c8b, L:/192.168.5.22:50990 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-12.23:32:20.073 [redisson-netty-1-3] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0x98fe05a2, L:/192.168.5.22:50991 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-12.23:32:20.182 [redisson-netty-1-5] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0x4655f198, L:/192.168.5.22:50992 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-12.23:32:20.261 [redisson-netty-1-8] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0x2b6db62b, L:/192.168.5.22:50993 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-12.23:32:20.370 [redisson-netty-1-10] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0x8d19e8d4, L:/192.168.5.22:50994 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-12.23:32:20.622 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-6] INFO  SimpleMessageListenerContainer - Restarting Consumer@1597aaa9: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:20.625 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-7] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:20.626 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-7] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:20.626 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-7] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:21.536 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-6] INFO  SimpleMessageListenerContainer - Restarting Consumer@35a71e16: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:21.539 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-7] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:21.540 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-7] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:21.540 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-7] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:22.064 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@72963022 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x4655f198, L:/192.168.5.22:50992 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@72963022 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x4655f198, L:/192.168.5.22:50992 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@72963022 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x4655f198, L:/192.168.5.22:50992 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.safeSetFailure(AbstractChannel.java:999)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:860)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:877)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:940)
	at io.netty.channel.AbstractChannelHandlerContext$WriteTask.run(AbstractChannelHandlerContext.java:1247)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-12.23:32:22.065 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:32:25.735 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-7] INFO  SimpleMessageListenerContainer - Restarting Consumer@499754e0: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:25.738 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-8] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:25.739 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-8] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:25.739 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-8] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:26.642 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-7] INFO  SimpleMessageListenerContainer - Restarting Consumer@2117b8ca: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:26.646 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-8] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:26.647 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-8] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:26.647 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-8] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:27.088 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@33978aa8 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-12.23:32:30.853 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-8] INFO  SimpleMessageListenerContainer - Restarting Consumer@791308a5: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:30.855 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-9] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:30.856 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-9] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:30.856 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-9] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:31.760 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-8] INFO  SimpleMessageListenerContainer - Restarting Consumer@298237c6: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:31.763 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-9] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:31.776 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-9] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:31.776 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-9] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:32.109 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@631994bc (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-12.23:32:35.962 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-9] INFO  SimpleMessageListenerContainer - Restarting Consumer@6d5dbb80: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:35.965 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-10] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:35.966 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-10] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:35.966 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-10] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:36.895 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-9] INFO  SimpleMessageListenerContainer - Restarting Consumer@3ac72722: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:36.898 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-10] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:36.899 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-10] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:36.899 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-10] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:37.117 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@2bbc3e0a (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-12.23:32:41.064 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-10] INFO  SimpleMessageListenerContainer - Restarting Consumer@3fb9af1: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:41.066 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-11] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:41.079 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-11] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:41.079 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-11] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:42.000 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-10] INFO  SimpleMessageListenerContainer - Restarting Consumer@d2f016a: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:42.003 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-11] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:42.003 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-11] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:42.003 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-11] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:42.128 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7327b898 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-12.23:32:46.188 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-11] INFO  SimpleMessageListenerContainer - Restarting Consumer@63e79e5c: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:46.191 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-12] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:46.192 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-12] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:46.192 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-12] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:47.114 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-11] INFO  SimpleMessageListenerContainer - Restarting Consumer@6775a7a4: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:47.121 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-12] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:47.122 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-12] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:47.122 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-12] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:47.147 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@71382a3a (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-12.23:32:51.268 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-12] INFO  SimpleMessageListenerContainer - Restarting Consumer@1aab1f6e: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:51.273 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-13] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:51.273 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-13] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:51.273 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-13] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:52.162 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@40008fa5 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-12.23:32:52.210 [scheduling-1    ] ERROR SendMessageTaskJob     - 定时任务，扫描MQ任务表发送消息失败。
org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30100ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30100ms.
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:97)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy107.queryNoSendMessageTaskList(Unknown Source)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl.queryNoSendMessageTaskList(TaskServiceImpl.java:31)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$FastClassBySpringCGLIB$$f2346e0c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$EnhancerBySpringCGLIB$$be5d91c3.queryNoSendMessageTaskList(<generated>)
	at top.javarem.infrastructure.adapter.repository.TaskRepository.queryNoSendMessageTaskList(TaskRepository.java:31)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$FastClassBySpringCGLIB$$4c8338f8.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$EnhancerBySpringCGLIB$$bbcc155.queryNoSendMessageTaskList(<generated>)
	at top.javarem.domain.task.service.TaskService.queryNoSendMessageTaskList(TaskService.java:23)
	at top.javarem.trigger.job.SendMessageTaskJob.execute(SendMessageTaskJob.java:33)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30100ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30100ms.
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:156)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 41 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30100ms.
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:83)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:80)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:67)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:64)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	... 48 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30100ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:197)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:162)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
	... 58 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: No operations allowed after connection closed.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2495)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:566)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionAlive(PoolBase.java:173)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:186)
	... 63 common frames omitted
Caused by: com.mysql.cj.exceptions.ConnectionIsClosedException: No operations allowed after connection closed.
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.NativeSession.checkClosed(NativeSession.java:1171)
	at com.mysql.cj.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:573)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2491)
	... 66 common frames omitted
24-12-12.23:32:52.211 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:32:52.239 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-12] INFO  SimpleMessageListenerContainer - Restarting Consumer@6e07610b: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:52.242 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-13] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:52.243 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-13] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:52.243 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-13] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:55.428 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1410032845 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x37df9c8b, L:/192.168.5.22:50990 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1410032845 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x37df9c8b, L:/192.168.5.22:50990 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1410032845 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x37df9c8b, L:/192.168.5.22:50990 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.safeSetFailure(AbstractChannel.java:999)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:860)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:877)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:940)
	at io.netty.channel.AbstractChannelHandlerContext$WriteTask.run(AbstractChannelHandlerContext.java:1247)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-12.23:32:56.345 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-13] INFO  SimpleMessageListenerContainer - Restarting Consumer@6cffc416: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:56.347 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-14] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:56.362 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-14] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:56.369 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-14] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:57.321 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-13] INFO  SimpleMessageListenerContainer - Restarting Consumer@5d19ff8d: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:32:57.324 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-14] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:32:57.325 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-14] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:32:57.325 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-14] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:00.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:33:01.456 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-14] INFO  SimpleMessageListenerContainer - Restarting Consumer@7981c7b0: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:01.459 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-15] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:01.470 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-15] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:01.470 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-15] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:02.381 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-14] INFO  SimpleMessageListenerContainer - Restarting Consumer@216d8bf2: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:02.384 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-15] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:02.395 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-15] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:02.395 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-15] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:03.227 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1159154028 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x886524e3, L:/192.168.5.22:50995 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1159154028 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x886524e3, L:/192.168.5.22:50995 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1159154028 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x886524e3, L:/192.168.5.22:50995 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.safeSetFailure(AbstractChannel.java:999)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:860)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:877)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:940)
	at io.netty.channel.AbstractChannelHandlerContext$WriteTask.run(AbstractChannelHandlerContext.java:1247)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-12.23:33:03.228 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:33:06.528 [scheduling-1    ] ERROR UpdateAwardStockJob    - 扣减库存失败
24-12-12.23:33:06.529 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:33:06.554 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-15] INFO  SimpleMessageListenerContainer - Restarting Consumer@11675855: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:06.557 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-16] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:06.557 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-16] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:06.558 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-16] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:07.496 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-15] INFO  SimpleMessageListenerContainer - Restarting Consumer@948a66a: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:07.499 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-16] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:07.499 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-16] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:07.499 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-16] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:11.547 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@552cf9e9 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-12.23:33:11.626 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-16] INFO  SimpleMessageListenerContainer - Restarting Consumer@53b69d71: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:11.630 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-17] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:11.631 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-17] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:11.631 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-17] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:12.568 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-16] INFO  SimpleMessageListenerContainer - Restarting Consumer@519cbbd2: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:12.571 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-17] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:12.572 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-17] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:12.572 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-17] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:16.555 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@264f1dab (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-12.23:33:16.742 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-17] INFO  SimpleMessageListenerContainer - Restarting Consumer@28735044: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:16.744 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-18] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:16.756 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-18] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:16.756 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-18] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:17.650 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-17] INFO  SimpleMessageListenerContainer - Restarting Consumer@ee8b2be: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:17.652 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-18] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:17.653 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-18] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:17.653 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-18] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:21.559 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@dc7b0ce (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-12.23:33:21.765 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-18] INFO  SimpleMessageListenerContainer - Restarting Consumer@5e901b0c: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:21.767 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-19] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:21.768 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-19] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:21.768 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-19] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:22.679 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-18] INFO  SimpleMessageListenerContainer - Restarting Consumer@21f51619: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:22.682 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-19] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:22.683 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-19] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:22.683 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-19] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:26.563 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@3a2d65c7 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-12.23:33:26.869 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-19] INFO  SimpleMessageListenerContainer - Restarting Consumer@76626579: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:26.871 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-20] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:26.882 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-20] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:26.882 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-20] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:27.839 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-19] INFO  SimpleMessageListenerContainer - Restarting Consumer@1c0c15a9: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:27.841 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-20] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:27.852 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-20] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:27.852 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-20] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:31.945 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-20] INFO  SimpleMessageListenerContainer - Restarting Consumer@cbf25c0: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:31.947 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-21] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:31.948 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-21] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:31.948 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-21] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:32.889 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-20] INFO  SimpleMessageListenerContainer - Restarting Consumer@29a7aaaa: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:32.891 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-21] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:32.903 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-21] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:32.903 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-21] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:36.536 [scheduling-1    ] ERROR SendMessageTaskJob     - 定时任务，扫描MQ任务表发送消息失败。
org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30006ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30006ms.
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:97)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy107.queryNoSendMessageTaskList(Unknown Source)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl.queryNoSendMessageTaskList(TaskServiceImpl.java:31)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$FastClassBySpringCGLIB$$f2346e0c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$EnhancerBySpringCGLIB$$be5d91c3.queryNoSendMessageTaskList(<generated>)
	at top.javarem.infrastructure.adapter.repository.TaskRepository.queryNoSendMessageTaskList(TaskRepository.java:31)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$FastClassBySpringCGLIB$$4c8338f8.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$EnhancerBySpringCGLIB$$bbcc155.queryNoSendMessageTaskList(<generated>)
	at top.javarem.domain.task.service.TaskService.queryNoSendMessageTaskList(TaskService.java:23)
	at top.javarem.trigger.job.SendMessageTaskJob.execute(SendMessageTaskJob.java:33)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30006ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30006ms.
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:156)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 41 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30006ms.
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:83)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:80)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:67)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:64)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	... 48 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30006ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:197)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:162)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
	... 58 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: No operations allowed after connection closed.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2495)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:566)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionAlive(PoolBase.java:173)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:186)
	... 63 common frames omitted
Caused by: com.mysql.cj.exceptions.ConnectionIsClosedException: No operations allowed after connection closed.
	at sun.reflect.GeneratedConstructorAccessor74.newInstance(Unknown Source)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.NativeSession.checkClosed(NativeSession.java:1171)
	at com.mysql.cj.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:573)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2491)
	... 66 common frames omitted
24-12-12.23:33:36.536 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:33:36.987 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-21] INFO  SimpleMessageListenerContainer - Restarting Consumer@6e1e6929: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:36.989 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-22] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:37.003 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-22] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:37.003 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-22] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:38.063 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-21] INFO  SimpleMessageListenerContainer - Restarting Consumer@3daa6b0a: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:38.067 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-22] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:38.068 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-22] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:38.068 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-22] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:39.837 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@957890409 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x2b6db62b, L:/192.168.5.22:50993 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@957890409 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x2b6db62b, L:/192.168.5.22:50993 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@957890409 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x2b6db62b, L:/192.168.5.22:50993 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.safeSetFailure(AbstractChannel.java:999)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:860)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:877)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:940)
	at io.netty.channel.AbstractChannelHandlerContext$WriteTask.run(AbstractChannelHandlerContext.java:1247)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-12.23:33:42.188 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-22] INFO  SimpleMessageListenerContainer - Restarting Consumer@432ec468: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:42.194 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-23] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:42.195 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-23] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:42.195 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-23] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:43.209 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-22] INFO  SimpleMessageListenerContainer - Restarting Consumer@4249a4d4: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:43.215 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-23] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:43.242 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-23] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:43.242 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-23] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:47.328 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-23] INFO  SimpleMessageListenerContainer - Restarting Consumer@240e72a3: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:47.331 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-24] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:47.332 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-24] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:47.332 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-24] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:48.360 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-23] INFO  SimpleMessageListenerContainer - Restarting Consumer@4916a518: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:48.362 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-24] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:48.362 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-24] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:48.362 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-24] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:52.445 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-24] INFO  SimpleMessageListenerContainer - Restarting Consumer@2168b87f: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:52.454 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-25] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:52.455 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-25] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:52.456 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-25] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:53.492 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-24] INFO  SimpleMessageListenerContainer - Restarting Consumer@6342e7be: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:53.494 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-25] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:53.494 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-25] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:53.495 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-25] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:57.576 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-25] INFO  SimpleMessageListenerContainer - Restarting Consumer@4fe1b3be: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:57.625 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-26] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:57.626 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-26] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:57.626 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-26] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:58.588 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-25] INFO  SimpleMessageListenerContainer - Restarting Consumer@1f5449cc: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:33:58.591 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-26] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:33:58.604 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-26] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:33:58.604 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-26] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:00.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:34:02.740 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-26] INFO  SimpleMessageListenerContainer - Restarting Consumer@797ca1fd: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:02.744 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-27] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:02.744 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-27] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:02.744 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-27] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:03.226 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@72963022 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x4655f198, L:/192.168.5.22:50992 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@72963022 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x4655f198, L:/192.168.5.22:50992 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@72963022 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x4655f198, L:/192.168.5.22:50992 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.safeSetFailure(AbstractChannel.java:999)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:860)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:877)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:940)
	at io.netty.channel.AbstractChannelHandlerContext$WriteTask.run(AbstractChannelHandlerContext.java:1247)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-12.23:34:03.227 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:34:03.758 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-26] INFO  SimpleMessageListenerContainer - Restarting Consumer@410aa2b: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:03.765 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-27] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:03.766 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-27] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:03.766 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-27] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:06.526 [scheduling-1    ] ERROR UpdateAwardStockJob    - 扣减库存失败
24-12-12.23:34:06.527 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:34:07.836 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-27] INFO  SimpleMessageListenerContainer - Restarting Consumer@3645a3be: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:07.838 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-28] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:07.839 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-28] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:07.839 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-28] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:08.867 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-27] INFO  SimpleMessageListenerContainer - Restarting Consumer@4a8728a7: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:08.870 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-28] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:08.871 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-28] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:08.871 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-28] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:12.991 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-28] INFO  SimpleMessageListenerContainer - Restarting Consumer@634d2275: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:12.994 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-29] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:12.995 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-29] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:12.995 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-29] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:13.951 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-28] INFO  SimpleMessageListenerContainer - Restarting Consumer@1d01506d: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:13.962 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-29] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:13.983 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-29] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:13.984 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-29] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:18.019 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-29] INFO  SimpleMessageListenerContainer - Restarting Consumer@29b172e4: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:18.022 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-30] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:18.023 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-30] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:18.023 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-30] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:19.106 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-29] INFO  SimpleMessageListenerContainer - Restarting Consumer@339fea42: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:19.108 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-30] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:19.109 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-30] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:19.110 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-30] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:23.221 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-30] INFO  SimpleMessageListenerContainer - Restarting Consumer@30edf970: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:23.223 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-31] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:23.224 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-31] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:23.224 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-31] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:24.234 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-30] INFO  SimpleMessageListenerContainer - Restarting Consumer@7e3172fa: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:24.236 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-31] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:24.250 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-31] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:24.250 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-31] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:28.327 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-31] INFO  SimpleMessageListenerContainer - Restarting Consumer@116d45b: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:28.330 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-32] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:28.331 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-32] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:28.331 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-32] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:29.346 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-31] INFO  SimpleMessageListenerContainer - Restarting Consumer@39e7efea: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:29.349 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-32] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:29.350 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-32] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:29.350 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-32] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:33.425 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-32] INFO  SimpleMessageListenerContainer - Restarting Consumer@3902a098: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:33.431 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-33] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:33.432 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-33] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:33.432 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-33] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:34.439 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-32] INFO  SimpleMessageListenerContainer - Restarting Consumer@77885024: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:34.441 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-33] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:34.442 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-33] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:34.442 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-33] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:36.533 [scheduling-1    ] ERROR SendMessageTaskJob     - 定时任务，扫描MQ任务表发送消息失败。
org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:97)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy107.queryNoSendMessageTaskList(Unknown Source)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl.queryNoSendMessageTaskList(TaskServiceImpl.java:31)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$FastClassBySpringCGLIB$$f2346e0c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$EnhancerBySpringCGLIB$$be5d91c3.queryNoSendMessageTaskList(<generated>)
	at top.javarem.infrastructure.adapter.repository.TaskRepository.queryNoSendMessageTaskList(TaskRepository.java:31)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$FastClassBySpringCGLIB$$4c8338f8.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$EnhancerBySpringCGLIB$$bbcc155.queryNoSendMessageTaskList(<generated>)
	at top.javarem.domain.task.service.TaskService.queryNoSendMessageTaskList(TaskService.java:23)
	at top.javarem.trigger.job.SendMessageTaskJob.execute(SendMessageTaskJob.java:33)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:156)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 41 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:83)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:80)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:67)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:64)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	... 48 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:197)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:162)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
	... 58 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:903)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:453)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)
	at com.zaxxer.hikari.pool.HikariPool.access$100(HikariPool.java:71)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:726)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	... 3 common frames omitted
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at sun.reflect.GeneratedConstructorAccessor72.newInstance(Unknown Source)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:144)
	at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:847)
	... 15 common frames omitted
Caused by: java.net.NoRouteToHostException: No route to host: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:155)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)
	... 17 common frames omitted
24-12-12.23:34:36.534 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:34:38.555 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-33] INFO  SimpleMessageListenerContainer - Restarting Consumer@58bf473a: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:38.558 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-34] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:38.559 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-34] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:38.559 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-34] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:39.562 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-33] INFO  SimpleMessageListenerContainer - Restarting Consumer@ff873d2: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:39.564 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-34] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:39.565 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-34] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:39.565 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-34] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:39.833 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1159154028 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x886524e3, L:/192.168.5.22:50995 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1159154028 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x886524e3, L:/192.168.5.22:50995 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1159154028 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x886524e3, L:/192.168.5.22:50995 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.access$200(DefaultPromise.java:35)
	at io.netty.util.concurrent.DefaultPromise$1.run(DefaultPromise.java:503)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-12.23:34:43.672 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-34] INFO  SimpleMessageListenerContainer - Restarting Consumer@5999299e: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:43.675 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-35] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:43.675 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-35] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:43.675 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-35] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:44.679 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-34] INFO  SimpleMessageListenerContainer - Restarting Consumer@726521bf: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:44.682 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-35] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:44.682 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-35] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:44.682 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-35] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:48.786 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-35] INFO  SimpleMessageListenerContainer - Restarting Consumer@2bb03da6: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:48.789 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-36] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:48.790 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-36] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:48.790 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-36] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:49.806 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-35] INFO  SimpleMessageListenerContainer - Restarting Consumer@73a7eb37: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:49.808 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-36] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:49.809 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-36] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:49.809 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-36] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:53.895 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-36] INFO  SimpleMessageListenerContainer - Restarting Consumer@b60c0a1: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:53.898 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-37] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:53.898 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-37] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:53.898 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-37] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:54.909 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-36] INFO  SimpleMessageListenerContainer - Restarting Consumer@237dcb8f: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:54.912 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-37] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:54.913 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-37] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:54.913 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-37] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:59.002 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-37] INFO  SimpleMessageListenerContainer - Restarting Consumer@656fa96a: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:34:59.004 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-38] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:34:59.005 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-38] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:34:59.005 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-38] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:00.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:35:00.004 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-37] INFO  SimpleMessageListenerContainer - Restarting Consumer@76720128: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:00.007 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-38] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:00.008 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-38] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:00.008 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-38] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:03.228 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1292371871 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x8d19e8d4, L:/192.168.5.22:50994 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1292371871 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x8d19e8d4, L:/192.168.5.22:50994 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1292371871 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x8d19e8d4, L:/192.168.5.22:50994 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.safeSetFailure(AbstractChannel.java:999)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:860)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:877)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:940)
	at io.netty.channel.AbstractChannelHandlerContext$WriteTask.run(AbstractChannelHandlerContext.java:1247)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-12.23:35:03.228 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:35:04.127 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-38] INFO  SimpleMessageListenerContainer - Restarting Consumer@69eb962e: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:04.130 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-39] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:04.131 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-39] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:04.131 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-39] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:05.142 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-38] INFO  SimpleMessageListenerContainer - Restarting Consumer@4d291901: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:05.144 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-39] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:05.157 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-39] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:05.158 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-39] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:09.221 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-39] INFO  SimpleMessageListenerContainer - Restarting Consumer@1c250b69: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:09.222 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-40] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:09.223 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-40] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:09.223 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-40] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:10.261 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-39] INFO  SimpleMessageListenerContainer - Restarting Consumer@5fbba43f: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:10.263 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-40] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:10.264 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-40] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:10.264 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-40] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:14.363 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-40] INFO  SimpleMessageListenerContainer - Restarting Consumer@2b5ba38: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:14.366 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-41] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:14.367 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-41] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:14.367 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-41] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:15.385 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-40] INFO  SimpleMessageListenerContainer - Restarting Consumer@63ee9312: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:15.389 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-41] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:15.389 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-41] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:15.389 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-41] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:19.477 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-41] INFO  SimpleMessageListenerContainer - Restarting Consumer@3596f6e5: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:19.480 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-42] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:19.481 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-42] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:19.481 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-42] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:20.505 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-41] INFO  SimpleMessageListenerContainer - Restarting Consumer@5c8e18e7: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:20.508 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-42] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:20.509 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-42] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:20.510 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-42] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:24.615 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-42] INFO  SimpleMessageListenerContainer - Restarting Consumer@1556725a: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:24.617 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-43] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:24.618 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-43] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:24.618 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-43] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:25.634 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-42] INFO  SimpleMessageListenerContainer - Restarting Consumer@72a20e24: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:25.637 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-43] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:25.649 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-43] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:25.649 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-43] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:29.717 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-43] INFO  SimpleMessageListenerContainer - Restarting Consumer@74a0c294: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:29.720 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-44] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:29.720 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-44] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:29.720 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-44] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:30.764 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-43] INFO  SimpleMessageListenerContainer - Restarting Consumer@2375043e: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:30.766 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-44] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:30.781 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-44] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:30.781 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-44] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:33.241 [scheduling-1    ] ERROR SendMessageTaskJob     - 定时任务，扫描MQ任务表发送消息失败。
org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30010ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30010ms.
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:97)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy107.queryNoSendMessageTaskList(Unknown Source)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl.queryNoSendMessageTaskList(TaskServiceImpl.java:31)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$FastClassBySpringCGLIB$$f2346e0c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$EnhancerBySpringCGLIB$$be5d91c3.queryNoSendMessageTaskList(<generated>)
	at top.javarem.infrastructure.adapter.repository.TaskRepository.queryNoSendMessageTaskList(TaskRepository.java:31)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$FastClassBySpringCGLIB$$4c8338f8.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$EnhancerBySpringCGLIB$$bbcc155.queryNoSendMessageTaskList(<generated>)
	at top.javarem.domain.task.service.TaskService.queryNoSendMessageTaskList(TaskService.java:23)
	at top.javarem.trigger.job.SendMessageTaskJob.execute(SendMessageTaskJob.java:33)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30010ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30010ms.
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:156)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 41 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30010ms.
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:83)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:80)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:67)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:64)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	... 48 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30010ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:197)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:162)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
	... 58 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:903)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:453)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)
	at com.zaxxer.hikari.pool.HikariPool.access$100(HikariPool.java:71)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:726)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	... 3 common frames omitted
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at sun.reflect.GeneratedConstructorAccessor72.newInstance(Unknown Source)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:144)
	at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:847)
	... 15 common frames omitted
Caused by: java.net.NoRouteToHostException: No route to host: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:155)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)
	... 17 common frames omitted
24-12-12.23:35:33.243 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:35:34.872 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-44] INFO  SimpleMessageListenerContainer - Restarting Consumer@5923edcd: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:34.874 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-45] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:34.888 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-45] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:34.888 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-45] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:35.965 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-44] INFO  SimpleMessageListenerContainer - Restarting Consumer@5208018c: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:35.967 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-45] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:35.980 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-45] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:35.980 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-45] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:36.530 [scheduling-1    ] ERROR UpdateAwardStockJob    - 扣减库存失败
24-12-12.23:35:36.531 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:35:39.830 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@72963022 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x4655f198, L:/192.168.5.22:50992 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@72963022 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x4655f198, L:/192.168.5.22:50992 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@72963022 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x4655f198, L:/192.168.5.22:50992 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.safeSetFailure(AbstractChannel.java:999)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:860)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:877)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:940)
	at io.netty.channel.AbstractChannelHandlerContext$WriteTask.run(AbstractChannelHandlerContext.java:1247)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-12.23:35:39.972 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-45] INFO  SimpleMessageListenerContainer - Restarting Consumer@6242a869: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:39.979 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-46] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:39.981 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-46] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:39.981 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-46] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:41.159 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-45] INFO  SimpleMessageListenerContainer - Restarting Consumer@4c97f4bb: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:41.161 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-46] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:41.174 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-46] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:41.174 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-46] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:45.103 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-46] INFO  SimpleMessageListenerContainer - Restarting Consumer@733636c9: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:45.106 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-47] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:45.107 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-47] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:45.107 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-47] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:46.297 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-46] INFO  SimpleMessageListenerContainer - Restarting Consumer@731964be: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:46.300 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-47] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:46.301 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-47] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:46.301 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-47] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:50.219 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-47] INFO  SimpleMessageListenerContainer - Restarting Consumer@8100942: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:50.221 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-48] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:50.229 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-48] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:50.229 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-48] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:51.415 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-47] INFO  SimpleMessageListenerContainer - Restarting Consumer@55515c07: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:51.418 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-48] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:51.431 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-48] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:51.431 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-48] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:55.432 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-48] INFO  SimpleMessageListenerContainer - Restarting Consumer@19cdfe43: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:55.435 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-49] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:55.435 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-49] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:55.436 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-49] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:56.534 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-48] INFO  SimpleMessageListenerContainer - Restarting Consumer@160edfd0: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:35:56.537 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-49] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:35:56.538 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-49] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:35:56.538 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-49] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:00.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:36:00.646 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-49] INFO  SimpleMessageListenerContainer - Restarting Consumer@5f3db10d: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:00.648 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-50] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:00.649 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-50] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:00.649 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-50] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:01.650 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-49] INFO  SimpleMessageListenerContainer - Restarting Consumer@f323c0c: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:01.653 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-50] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:01.653 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-50] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:01.653 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-50] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:03.235 [scheduling-1    ] ERROR UpdateAwardStockJob    - 扣减库存失败
24-12-12.23:36:03.235 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:36:05.739 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-50] INFO  SimpleMessageListenerContainer - Restarting Consumer@50a308e4: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:05.740 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-51] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:05.741 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-51] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:05.741 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-51] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:06.745 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-50] INFO  SimpleMessageListenerContainer - Restarting Consumer@7ac2df45: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:06.747 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-51] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:06.761 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-51] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:06.761 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-51] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:10.835 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-51] INFO  SimpleMessageListenerContainer - Restarting Consumer@696cc9c6: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:10.837 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-52] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:10.837 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-52] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:10.837 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-52] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:11.868 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-51] INFO  SimpleMessageListenerContainer - Restarting Consumer@6ebcfdbb: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:11.871 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-52] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:11.872 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-52] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:11.872 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-52] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:16.003 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-52] INFO  SimpleMessageListenerContainer - Restarting Consumer@79a2c5f6: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:16.005 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-53] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:16.019 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-53] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:16.019 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-53] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:17.018 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-52] INFO  SimpleMessageListenerContainer - Restarting Consumer@1cf7a836: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:17.021 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-53] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:17.022 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-53] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:17.022 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-53] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:21.171 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-53] INFO  SimpleMessageListenerContainer - Restarting Consumer@5a83d470: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:21.173 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-54] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:21.174 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-54] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:21.174 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-54] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:22.192 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-53] INFO  SimpleMessageListenerContainer - Restarting Consumer@75aabd9a: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:22.195 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-54] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:22.195 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-54] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:22.195 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-54] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:26.315 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-54] INFO  SimpleMessageListenerContainer - Restarting Consumer@25896ef: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:26.317 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-55] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:26.331 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-55] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:26.331 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-55] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:27.330 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-54] INFO  SimpleMessageListenerContainer - Restarting Consumer@69d29b20: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:27.332 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-55] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:27.345 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-55] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:27.345 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-55] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:31.450 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-55] INFO  SimpleMessageListenerContainer - Restarting Consumer@1dfa4c0f: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:31.454 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-56] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:31.455 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-56] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:31.455 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-56] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:32.462 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-55] INFO  SimpleMessageListenerContainer - Restarting Consumer@6614baba: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:32.466 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-56] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:32.467 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-56] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:32.467 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-56] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:33.243 [scheduling-1    ] ERROR SendMessageTaskJob     - 定时任务，扫描MQ任务表发送消息失败。
org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30005ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30005ms.
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:97)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy107.queryNoSendMessageTaskList(Unknown Source)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl.queryNoSendMessageTaskList(TaskServiceImpl.java:31)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$FastClassBySpringCGLIB$$f2346e0c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$EnhancerBySpringCGLIB$$be5d91c3.queryNoSendMessageTaskList(<generated>)
	at top.javarem.infrastructure.adapter.repository.TaskRepository.queryNoSendMessageTaskList(TaskRepository.java:31)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$FastClassBySpringCGLIB$$4c8338f8.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$EnhancerBySpringCGLIB$$bbcc155.queryNoSendMessageTaskList(<generated>)
	at top.javarem.domain.task.service.TaskService.queryNoSendMessageTaskList(TaskService.java:23)
	at top.javarem.trigger.job.SendMessageTaskJob.execute(SendMessageTaskJob.java:33)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30005ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30005ms.
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:156)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 41 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30005ms.
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:83)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:80)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:67)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:64)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	... 48 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30005ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:197)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:162)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
	... 58 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:903)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:453)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)
	at com.zaxxer.hikari.pool.HikariPool.access$100(HikariPool.java:71)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:726)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	... 3 common frames omitted
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at sun.reflect.GeneratedConstructorAccessor72.newInstance(Unknown Source)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:144)
	at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:847)
	... 15 common frames omitted
Caused by: java.net.NoRouteToHostException: No route to host: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:155)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)
	... 17 common frames omitted
24-12-12.23:36:33.243 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:36:36.536 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1159154028 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x886524e3, L:/192.168.5.22:50995 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1159154028 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x886524e3, L:/192.168.5.22:50995 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1159154028 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x886524e3, L:/192.168.5.22:50995 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.safeSetFailure(AbstractChannel.java:999)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:860)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:877)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:940)
	at io.netty.channel.AbstractChannelHandlerContext$WriteTask.run(AbstractChannelHandlerContext.java:1247)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-12.23:36:36.549 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-56] INFO  SimpleMessageListenerContainer - Restarting Consumer@32a9d455: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:36.551 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-57] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:36.565 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-57] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:36.565 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-57] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:37.565 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-56] INFO  SimpleMessageListenerContainer - Restarting Consumer@58920384: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:37.568 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-57] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:37.569 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-57] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:37.569 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-57] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:41.677 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-57] INFO  SimpleMessageListenerContainer - Restarting Consumer@4212b3b9: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:41.680 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-58] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:41.681 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-58] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:41.681 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-58] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:42.684 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-57] INFO  SimpleMessageListenerContainer - Restarting Consumer@50373423: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:42.686 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-58] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:42.699 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-58] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:42.699 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-58] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:46.785 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-58] INFO  SimpleMessageListenerContainer - Restarting Consumer@6395df57: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:46.788 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-59] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:46.788 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-59] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:46.788 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-59] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:47.823 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-58] INFO  SimpleMessageListenerContainer - Restarting Consumer@1bcb57b: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:47.825 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-59] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:47.826 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-59] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:47.826 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-59] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:51.986 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-59] INFO  SimpleMessageListenerContainer - Restarting Consumer@4078d99: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:51.989 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-60] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:52.000 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-60] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:52.001 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-60] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:53.004 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-59] INFO  SimpleMessageListenerContainer - Restarting Consumer@6b0cbf02: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:53.006 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-60] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:53.007 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-60] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:53.007 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-60] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:57.104 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-60] INFO  SimpleMessageListenerContainer - Restarting Consumer@7b80fd9d: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:57.107 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-61] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:57.107 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-61] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:57.107 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-61] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:58.120 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-60] INFO  SimpleMessageListenerContainer - Restarting Consumer@2d8b559f: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:36:58.123 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-61] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:36:58.124 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-61] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:36:58.124 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-61] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:00.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:37:02.222 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-61] INFO  SimpleMessageListenerContainer - Restarting Consumer@1e4bdc7f: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:02.225 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-62] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:02.241 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-62] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:02.242 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-62] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:03.231 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-61] INFO  SimpleMessageListenerContainer - Restarting Consumer@405c6374: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:03.234 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1292371871 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x8d19e8d4, L:/192.168.5.22:50994 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1292371871 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x8d19e8d4, L:/192.168.5.22:50994 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1292371871 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x8d19e8d4, L:/192.168.5.22:50994 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.safeSetFailure(AbstractChannel.java:999)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:860)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:877)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:940)
	at io.netty.channel.AbstractChannelHandlerContext$WriteTask.run(AbstractChannelHandlerContext.java:1247)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-12.23:37:03.235 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:37:03.235 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-62] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:03.235 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-62] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:03.235 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-62] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:06.528 [scheduling-1    ] ERROR UpdateAwardStockJob    - 扣减库存失败
24-12-12.23:37:06.529 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:37:07.346 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-62] INFO  SimpleMessageListenerContainer - Restarting Consumer@159cf72f: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:07.348 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-63] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:07.349 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-63] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:07.349 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-63] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:08.346 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-62] INFO  SimpleMessageListenerContainer - Restarting Consumer@3de9e36a: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:08.349 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-63] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:08.349 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-63] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:08.350 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-63] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:12.488 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-63] INFO  SimpleMessageListenerContainer - Restarting Consumer@188a0a44: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:12.491 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-64] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:12.492 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-64] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:12.492 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-64] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:13.461 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-63] INFO  SimpleMessageListenerContainer - Restarting Consumer@14c1cd4: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:13.467 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-64] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:13.468 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-64] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:13.468 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-64] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:17.603 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-64] INFO  SimpleMessageListenerContainer - Restarting Consumer@93490db: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:17.606 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-65] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:17.607 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-65] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:17.607 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-65] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:18.603 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-64] INFO  SimpleMessageListenerContainer - Restarting Consumer@35b783b1: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:18.606 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-65] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:18.607 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-65] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:18.607 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-65] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:22.703 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-65] INFO  SimpleMessageListenerContainer - Restarting Consumer@7139c4ee: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:22.706 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-66] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:22.706 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-66] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:22.706 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-66] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:23.714 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-65] INFO  SimpleMessageListenerContainer - Restarting Consumer@19c88a70: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:23.717 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-66] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:23.730 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-66] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:23.730 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-66] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:27.817 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-66] INFO  SimpleMessageListenerContainer - Restarting Consumer@681230e8: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:27.819 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-67] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:27.820 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-67] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:27.820 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-67] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:28.835 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-66] INFO  SimpleMessageListenerContainer - Restarting Consumer@571e4a93: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:28.841 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-67] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:28.841 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-67] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:28.841 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-67] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:32.919 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-67] INFO  SimpleMessageListenerContainer - Restarting Consumer@239c529b: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:32.955 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-68] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:32.955 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-68] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:32.956 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-68] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:33.937 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-67] INFO  SimpleMessageListenerContainer - Restarting Consumer@2f1289a9: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:33.939 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-68] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:33.954 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-68] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:33.954 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-68] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:36.536 [scheduling-1    ] ERROR SendMessageTaskJob     - 定时任务，扫描MQ任务表发送消息失败。
org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:97)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy107.queryNoSendMessageTaskList(Unknown Source)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl.queryNoSendMessageTaskList(TaskServiceImpl.java:31)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$FastClassBySpringCGLIB$$f2346e0c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$EnhancerBySpringCGLIB$$be5d91c3.queryNoSendMessageTaskList(<generated>)
	at top.javarem.infrastructure.adapter.repository.TaskRepository.queryNoSendMessageTaskList(TaskRepository.java:31)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$FastClassBySpringCGLIB$$4c8338f8.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$EnhancerBySpringCGLIB$$bbcc155.queryNoSendMessageTaskList(<generated>)
	at top.javarem.domain.task.service.TaskService.queryNoSendMessageTaskList(TaskService.java:23)
	at top.javarem.trigger.job.SendMessageTaskJob.execute(SendMessageTaskJob.java:33)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:156)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 41 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:83)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:80)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:67)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:64)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	... 48 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:197)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:162)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
	... 58 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:903)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:453)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)
	at com.zaxxer.hikari.pool.HikariPool.access$100(HikariPool.java:71)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:726)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	... 3 common frames omitted
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at sun.reflect.GeneratedConstructorAccessor72.newInstance(Unknown Source)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:144)
	at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:847)
	... 15 common frames omitted
Caused by: java.net.NoRouteToHostException: No route to host: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:155)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)
	... 17 common frames omitted
24-12-12.23:37:36.536 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:37:38.117 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-68] INFO  SimpleMessageListenerContainer - Restarting Consumer@7607711d: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:38.119 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-69] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:38.120 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-69] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:38.120 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-69] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:39.231 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-68] INFO  SimpleMessageListenerContainer - Restarting Consumer@5579ff78: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:39.253 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-69] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:39.254 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-69] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:39.254 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-69] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:39.826 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@72963022 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x4655f198, L:/192.168.5.22:50992 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@72963022 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x4655f198, L:/192.168.5.22:50992 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@72963022 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x4655f198, L:/192.168.5.22:50992 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.safeSetFailure(AbstractChannel.java:999)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:860)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:877)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:940)
	at io.netty.channel.AbstractChannelHandlerContext$WriteTask.run(AbstractChannelHandlerContext.java:1247)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-12.23:37:43.178 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-69] INFO  SimpleMessageListenerContainer - Restarting Consumer@5757ed28: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:43.180 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-70] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:43.180 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-70] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:43.180 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-70] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:44.490 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-69] INFO  SimpleMessageListenerContainer - Restarting Consumer@10e43e80: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:44.493 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-70] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:44.493 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-70] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:44.494 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-70] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:48.263 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-70] INFO  SimpleMessageListenerContainer - Restarting Consumer@4a244aeb: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:48.267 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-71] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:48.268 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-71] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:48.268 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-71] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:49.602 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-70] INFO  SimpleMessageListenerContainer - Restarting Consumer@738f95f5: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:49.605 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-71] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:49.605 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-71] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:49.606 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-71] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:53.458 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-71] INFO  SimpleMessageListenerContainer - Restarting Consumer@8d08631: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:53.460 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-72] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:53.461 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-72] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:53.461 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-72] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:54.712 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-71] INFO  SimpleMessageListenerContainer - Restarting Consumer@59586d8f: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:54.715 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-72] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:54.715 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-72] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:54.716 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-72] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:58.569 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-72] INFO  SimpleMessageListenerContainer - Restarting Consumer@318ecff8: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:58.573 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-73] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:58.574 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-73] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:58.574 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-73] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:59.848 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-72] INFO  SimpleMessageListenerContainer - Restarting Consumer@6069aa7f: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:37:59.851 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-73] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:37:59.852 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-73] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:37:59.852 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-73] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:00.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:38:03.227 [scheduling-1    ] ERROR UpdateAwardStockJob    - 扣减库存失败
24-12-12.23:38:03.227 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:38:03.679 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-73] INFO  SimpleMessageListenerContainer - Restarting Consumer@4bdf569d: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:03.682 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-74] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:03.683 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-74] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:03.683 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-74] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:04.983 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-73] INFO  SimpleMessageListenerContainer - Restarting Consumer@6b5584be: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:04.986 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-74] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:04.987 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-74] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:04.987 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-74] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:06.526 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1159154028 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x886524e3, L:/192.168.5.22:50995 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1159154028 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x886524e3, L:/192.168.5.22:50995 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1159154028 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x886524e3, L:/192.168.5.22:50995 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.safeSetFailure(AbstractChannel.java:999)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:860)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:877)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:940)
	at io.netty.channel.AbstractChannelHandlerContext$WriteTask.run(AbstractChannelHandlerContext.java:1247)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-12.23:38:06.528 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:38:08.821 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-74] INFO  SimpleMessageListenerContainer - Restarting Consumer@24d3ca78: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:08.824 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-75] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:08.825 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-75] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:08.825 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-75] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:10.091 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-74] INFO  SimpleMessageListenerContainer - Restarting Consumer@cd9868e: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:10.093 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-75] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:10.094 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-75] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:10.094 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-75] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:13.915 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-75] INFO  SimpleMessageListenerContainer - Restarting Consumer@73932422: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:13.919 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-76] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:13.919 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-76] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:13.919 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-76] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:15.203 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-75] INFO  SimpleMessageListenerContainer - Restarting Consumer@2644c510: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:15.205 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-76] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:15.219 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-76] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:15.219 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-76] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:18.944 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-76] INFO  SimpleMessageListenerContainer - Restarting Consumer@1037c214: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:18.945 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-77] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:18.946 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-77] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:18.946 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-77] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:20.378 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-76] INFO  SimpleMessageListenerContainer - Restarting Consumer@aa50b62: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:20.383 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-77] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:20.383 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-77] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:20.383 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-77] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:24.079 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-77] INFO  SimpleMessageListenerContainer - Restarting Consumer@460e82b1: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:24.082 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-78] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:24.082 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-78] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:24.082 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-78] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:25.503 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-77] INFO  SimpleMessageListenerContainer - Restarting Consumer@784a9993: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:25.505 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-78] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:25.519 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-78] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:25.519 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-78] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:29.171 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-78] INFO  SimpleMessageListenerContainer - Restarting Consumer@1f2edc2d: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:29.174 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-79] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:29.174 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-79] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:29.174 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-79] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:30.630 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-78] INFO  SimpleMessageListenerContainer - Restarting Consumer@16371d11: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:30.634 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-79] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:30.635 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-79] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:30.635 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-79] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:34.275 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-79] INFO  SimpleMessageListenerContainer - Restarting Consumer@44d63346: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:34.278 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-80] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:34.278 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-80] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:34.278 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-80] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:35.731 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-79] INFO  SimpleMessageListenerContainer - Restarting Consumer@7098c3aa: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:35.734 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-80] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:35.734 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-80] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:35.734 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-80] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:36.533 [scheduling-1    ] ERROR SendMessageTaskJob     - 定时任务，扫描MQ任务表发送消息失败。
org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:97)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy107.queryNoSendMessageTaskList(Unknown Source)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl.queryNoSendMessageTaskList(TaskServiceImpl.java:31)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$FastClassBySpringCGLIB$$f2346e0c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$EnhancerBySpringCGLIB$$be5d91c3.queryNoSendMessageTaskList(<generated>)
	at top.javarem.infrastructure.adapter.repository.TaskRepository.queryNoSendMessageTaskList(TaskRepository.java:31)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$FastClassBySpringCGLIB$$4c8338f8.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$EnhancerBySpringCGLIB$$bbcc155.queryNoSendMessageTaskList(<generated>)
	at top.javarem.domain.task.service.TaskService.queryNoSendMessageTaskList(TaskService.java:23)
	at top.javarem.trigger.job.SendMessageTaskJob.execute(SendMessageTaskJob.java:33)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:156)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 41 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:83)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:80)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:67)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:64)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	... 48 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:197)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:162)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
	... 58 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:903)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:453)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)
	at com.zaxxer.hikari.pool.HikariPool.access$100(HikariPool.java:71)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:726)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	... 3 common frames omitted
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at sun.reflect.GeneratedConstructorAccessor72.newInstance(Unknown Source)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:144)
	at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:847)
	... 15 common frames omitted
Caused by: java.net.NoRouteToHostException: No route to host: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:155)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)
	... 17 common frames omitted
24-12-12.23:38:36.535 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:38:39.384 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-80] INFO  SimpleMessageListenerContainer - Restarting Consumer@3ad5d2b9: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:39.392 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-81] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:39.416 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-81] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:39.416 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-81] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:39.829 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1292371871 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x8d19e8d4, L:/192.168.5.22:50994 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1292371871 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x8d19e8d4, L:/192.168.5.22:50994 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1292371871 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x8d19e8d4, L:/192.168.5.22:50994 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.safeSetFailure(AbstractChannel.java:999)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:860)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:877)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:940)
	at io.netty.channel.AbstractChannelHandlerContext$WriteTask.run(AbstractChannelHandlerContext.java:1247)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-12.23:38:40.832 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-80] INFO  SimpleMessageListenerContainer - Restarting Consumer@22e3cc9c: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:40.835 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-81] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:40.848 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-81] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:40.848 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-81] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:44.529 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-81] INFO  SimpleMessageListenerContainer - Restarting Consumer@7e8d3b2b: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:44.532 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-82] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:44.532 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-82] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:44.532 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-82] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:45.964 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-81] INFO  SimpleMessageListenerContainer - Restarting Consumer@9d5512d: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:45.966 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-82] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:45.979 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-82] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:45.979 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-82] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:49.675 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-82] INFO  SimpleMessageListenerContainer - Restarting Consumer@5084d0a: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:49.677 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-83] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:49.690 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-83] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:49.690 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-83] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:51.147 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-82] INFO  SimpleMessageListenerContainer - Restarting Consumer@5413948: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:51.149 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-83] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:51.150 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-83] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:51.150 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-83] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:54.813 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-83] INFO  SimpleMessageListenerContainer - Restarting Consumer@43f24470: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:54.819 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-84] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:54.820 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-84] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:54.820 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-84] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:56.245 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-83] INFO  SimpleMessageListenerContainer - Restarting Consumer@3bdc7097: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:56.248 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-84] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:56.249 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-84] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:56.249 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-84] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:59.954 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-84] INFO  SimpleMessageListenerContainer - Restarting Consumer@3f2b3391: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:38:59.957 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-85] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:38:59.958 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-85] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:38:59.958 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-85] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:00.001 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:39:01.384 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-84] INFO  SimpleMessageListenerContainer - Restarting Consumer@3452d2dc: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:01.387 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-85] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:01.400 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-85] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:01.400 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-85] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:05.048 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-85] INFO  SimpleMessageListenerContainer - Restarting Consumer@58a1c3fe: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:05.050 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-86] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:05.051 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-86] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:05.051 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-86] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:06.503 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-85] INFO  SimpleMessageListenerContainer - Restarting Consumer@7f46d3d4: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:06.505 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-86] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:06.506 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-86] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:06.506 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-86] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:10.123 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-86] INFO  SimpleMessageListenerContainer - Restarting Consumer@705afa0: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:10.126 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-87] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:10.127 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-87] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:10.127 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-87] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:11.590 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-86] INFO  SimpleMessageListenerContainer - Restarting Consumer@56c2528c: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:11.593 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-87] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:11.593 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-87] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:11.593 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-87] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:15.220 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-87] INFO  SimpleMessageListenerContainer - Restarting Consumer@51476b63: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:15.222 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-88] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:15.223 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-88] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:15.223 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-88] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:16.674 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-87] INFO  SimpleMessageListenerContainer - Restarting Consumer@625ca17f: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:16.678 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-88] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:16.679 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-88] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:16.679 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-88] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:20.296 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-88] INFO  SimpleMessageListenerContainer - Restarting Consumer@30992511: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:20.299 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-89] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:20.299 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-89] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:20.299 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-89] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:21.842 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-88] INFO  SimpleMessageListenerContainer - Restarting Consumer@635b6f1f: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:21.844 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-89] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:21.858 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-89] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:21.858 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-89] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:25.418 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-89] INFO  SimpleMessageListenerContainer - Restarting Consumer@3c430f6b: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:25.421 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-90] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:25.432 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-90] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:25.432 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-90] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:26.961 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-89] INFO  SimpleMessageListenerContainer - Restarting Consumer@3e12adcf: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:26.964 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-90] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:26.965 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-90] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:26.965 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-90] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:30.011 [scheduling-1    ] ERROR SendMessageTaskJob     - 定时任务，扫描MQ任务表发送消息失败。
org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30007ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30007ms.
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:97)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy107.queryNoSendMessageTaskList(Unknown Source)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl.queryNoSendMessageTaskList(TaskServiceImpl.java:31)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$FastClassBySpringCGLIB$$f2346e0c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$EnhancerBySpringCGLIB$$be5d91c3.queryNoSendMessageTaskList(<generated>)
	at top.javarem.infrastructure.adapter.repository.TaskRepository.queryNoSendMessageTaskList(TaskRepository.java:31)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$FastClassBySpringCGLIB$$4c8338f8.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$EnhancerBySpringCGLIB$$bbcc155.queryNoSendMessageTaskList(<generated>)
	at top.javarem.domain.task.service.TaskService.queryNoSendMessageTaskList(TaskService.java:23)
	at top.javarem.trigger.job.SendMessageTaskJob.execute(SendMessageTaskJob.java:33)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30007ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30007ms.
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:156)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 41 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30007ms.
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:83)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:80)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:67)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:64)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	... 48 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30007ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:197)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:162)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
	... 58 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:903)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:453)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)
	at com.zaxxer.hikari.pool.HikariPool.access$100(HikariPool.java:71)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:726)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	... 3 common frames omitted
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at sun.reflect.GeneratedConstructorAccessor72.newInstance(Unknown Source)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:144)
	at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:847)
	... 15 common frames omitted
Caused by: java.net.NoRouteToHostException: No route to host: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:155)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)
	... 17 common frames omitted
24-12-12.23:39:30.012 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:39:30.527 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-90] INFO  SimpleMessageListenerContainer - Restarting Consumer@43b433c7: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:30.529 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-91] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:30.530 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-91] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:30.530 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-91] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:32.072 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-90] INFO  SimpleMessageListenerContainer - Restarting Consumer@a4afe21: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:32.075 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-91] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:32.076 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-91] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:32.077 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-91] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:33.233 [scheduling-1    ] ERROR UpdateAwardStockJob    - 扣减库存失败
24-12-12.23:39:33.233 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:39:35.613 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-91] INFO  SimpleMessageListenerContainer - Restarting Consumer@3d9ba6af: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:35.616 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-92] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:35.616 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-92] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:35.616 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-92] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:36.526 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@72963022 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x4655f198, L:/192.168.5.22:50992 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@72963022 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x4655f198, L:/192.168.5.22:50992 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.GeneratedMethodAccessor49.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@72963022 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x4655f198, L:/192.168.5.22:50992 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.safeSetFailure(AbstractChannel.java:999)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:860)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:877)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:940)
	at io.netty.channel.AbstractChannelHandlerContext$WriteTask.run(AbstractChannelHandlerContext.java:1247)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-12.23:39:37.186 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-91] INFO  SimpleMessageListenerContainer - Restarting Consumer@4931e219: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:37.189 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-92] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:37.189 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-92] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:37.189 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-92] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:40.737 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-92] INFO  SimpleMessageListenerContainer - Restarting Consumer@3f39ad1b: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:40.740 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-93] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:40.740 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-93] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:40.740 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-93] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:42.292 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-92] INFO  SimpleMessageListenerContainer - Restarting Consumer@3dcff5e3: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:42.296 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-93] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:42.297 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-93] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:42.297 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-93] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:45.854 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-93] INFO  SimpleMessageListenerContainer - Restarting Consumer@3ce76474: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:45.857 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-94] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:45.857 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-94] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:45.857 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-94] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:47.391 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-93] INFO  SimpleMessageListenerContainer - Restarting Consumer@7ee60cd2: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:47.394 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-94] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:47.395 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-94] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:47.395 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-94] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:50.970 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-94] INFO  SimpleMessageListenerContainer - Restarting Consumer@5370b699: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:50.972 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-95] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:50.973 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-95] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:50.973 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-95] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:52.494 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-94] INFO  SimpleMessageListenerContainer - Restarting Consumer@275312b3: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:52.497 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-95] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:52.497 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-95] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:52.497 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-95] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:56.086 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-95] INFO  SimpleMessageListenerContainer - Restarting Consumer@132db1e8: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:56.089 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-96] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:56.089 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-96] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:56.089 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-96] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:57.607 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-95] INFO  SimpleMessageListenerContainer - Restarting Consumer@1c91e42d: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:39:57.609 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-96] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:39:57.623 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-96] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:39:57.624 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-96] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:00.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:40:01.198 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-96] INFO  SimpleMessageListenerContainer - Restarting Consumer@16060bd5: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:01.201 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-97] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:01.201 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-97] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:01.201 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-97] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:02.729 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-96] INFO  SimpleMessageListenerContainer - Restarting Consumer@7a051279: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:02.731 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-97] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:02.732 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-97] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:02.732 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-97] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:03.232 [scheduling-1    ] ERROR UpdateAwardStockJob    - 扣减库存失败
24-12-12.23:40:03.233 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:40:06.319 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-97] INFO  SimpleMessageListenerContainer - Restarting Consumer@3243f5a6: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:06.322 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-98] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:06.322 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-98] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:06.322 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-98] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:06.530 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1159154028 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x886524e3, L:/192.168.5.22:50995 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1159154028 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x886524e3, L:/192.168.5.22:50995 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.GeneratedMethodAccessor49.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1159154028 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x886524e3, L:/192.168.5.22:50995 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.access$200(DefaultPromise.java:35)
	at io.netty.util.concurrent.DefaultPromise$1.run(DefaultPromise.java:503)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-12.23:40:06.531 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-12.23:40:07.912 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-97] INFO  SimpleMessageListenerContainer - Restarting Consumer@51015ccc: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:07.915 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-98] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:07.915 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-98] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:07.915 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-98] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:11.462 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-98] INFO  SimpleMessageListenerContainer - Restarting Consumer@1d7e96b1: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:11.464 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-99] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:11.465 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-99] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:11.465 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-99] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:13.023 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-98] INFO  SimpleMessageListenerContainer - Restarting Consumer@1c6e19f: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:13.025 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-99] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:13.025 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-99] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:13.025 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-99] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:16.554 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-99] INFO  SimpleMessageListenerContainer - Restarting Consumer@729d54be: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:16.558 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-100] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:16.559 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-100] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:16.559 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-100] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:18.125 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-99] INFO  SimpleMessageListenerContainer - Restarting Consumer@524426af: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:18.127 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-100] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:18.128 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-100] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:18.128 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-100] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:21.661 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-100] INFO  SimpleMessageListenerContainer - Restarting Consumer@1b3f3632: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:21.663 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-101] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:21.664 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-101] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:21.664 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-101] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:23.237 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-100] INFO  SimpleMessageListenerContainer - Restarting Consumer@43666958: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:23.240 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-101] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:23.240 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-101] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:23.240 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-101] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:26.790 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-101] INFO  SimpleMessageListenerContainer - Restarting Consumer@24210563: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:26.793 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-102] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:26.793 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-102] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:26.793 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-102] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:28.359 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-101] INFO  SimpleMessageListenerContainer - Restarting Consumer@3349727c: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:28.362 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-102] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:28.362 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-102] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:28.362 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-102] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:31.915 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-102] INFO  SimpleMessageListenerContainer - Restarting Consumer@7985fe7d: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:31.917 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-103] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:31.918 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-103] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:31.918 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-103] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:33.474 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-102] INFO  SimpleMessageListenerContainer - Restarting Consumer@6ff602d4: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:33.478 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-103] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:33.479 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-103] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:33.479 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-103] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:36.536 [scheduling-1    ] ERROR SendMessageTaskJob     - 定时任务，扫描MQ任务表发送消息失败。
org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30003ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30003ms.
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:97)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy107.queryNoSendMessageTaskList(Unknown Source)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl.queryNoSendMessageTaskList(TaskServiceImpl.java:31)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$FastClassBySpringCGLIB$$f2346e0c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$EnhancerBySpringCGLIB$$be5d91c3.queryNoSendMessageTaskList(<generated>)
	at top.javarem.infrastructure.adapter.repository.TaskRepository.queryNoSendMessageTaskList(TaskRepository.java:31)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$FastClassBySpringCGLIB$$4c8338f8.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$EnhancerBySpringCGLIB$$bbcc155.queryNoSendMessageTaskList(<generated>)
	at top.javarem.domain.task.service.TaskService.queryNoSendMessageTaskList(TaskService.java:23)
	at top.javarem.trigger.job.SendMessageTaskJob.execute(SendMessageTaskJob.java:33)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30003ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30003ms.
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:156)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 41 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30003ms.
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:83)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:80)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:67)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:64)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	... 48 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30003ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:197)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:162)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
	... 58 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:903)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:453)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)
	at com.zaxxer.hikari.pool.HikariPool.access$100(HikariPool.java:71)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:726)
	at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	... 3 common frames omitted
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at sun.reflect.GeneratedConstructorAccessor72.newInstance(Unknown Source)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:144)
	at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:847)
	... 15 common frames omitted
Caused by: java.net.NoRouteToHostException: No route to host: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:155)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)
	... 17 common frames omitted
24-12-12.23:40:36.537 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-12.23:40:37.038 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-103] INFO  SimpleMessageListenerContainer - Restarting Consumer@636e4af9: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:37.041 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-104] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:37.041 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-104] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:37.041 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-104] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:38.574 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-103] INFO  SimpleMessageListenerContainer - Restarting Consumer@d8280fb: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:38.576 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-104] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:38.590 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-104] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:38.590 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-104] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:39.837 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1292371871 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x8d19e8d4, L:/192.168.5.22:50994 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1292371871 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x8d19e8d4, L:/192.168.5.22:50994 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.GeneratedMethodAccessor49.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@1292371871 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x8d19e8d4, L:/192.168.5.22:50994 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.access$200(DefaultPromise.java:35)
	at io.netty.util.concurrent.DefaultPromise$1.run(DefaultPromise.java:503)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-12.23:40:42.147 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-104] INFO  SimpleMessageListenerContainer - Restarting Consumer@44e0d565: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:42.150 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-105] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:42.151 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-105] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:42.151 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-105] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:43.718 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-104] INFO  SimpleMessageListenerContainer - Restarting Consumer@739f101d: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:43.721 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-105] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:43.722 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-105] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:43.722 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-105] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:47.264 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-105] INFO  SimpleMessageListenerContainer - Restarting Consumer@95a543d: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:47.270 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-106] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:47.271 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-106] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:47.271 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-106] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:48.817 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-105] INFO  SimpleMessageListenerContainer - Restarting Consumer@64590ee1: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:48.820 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-106] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:48.821 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-106] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:48.821 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-106] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:52.385 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-106] INFO  SimpleMessageListenerContainer - Restarting Consumer@7768345f: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:52.387 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-107] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:52.388 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-107] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:52.388 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-107] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:53.922 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-106] INFO  SimpleMessageListenerContainer - Restarting Consumer@e82fc1a: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:53.925 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-107] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:53.925 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-107] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:53.925 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-107] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:57.505 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-107] INFO  SimpleMessageListenerContainer - Restarting Consumer@591fa332: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:57.507 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-108] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:57.521 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-108] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:57.521 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-108] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:59.024 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-107] INFO  SimpleMessageListenerContainer - Restarting Consumer@148b97ef: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
24-12-12.23:40:59.031 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-108] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:40:59.032 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-108] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
24-12-12.23:40:59.032 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-108] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-12.23:41:00.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-12.23:41:02.388 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-109] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.23:41:02.388 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-109] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-12.23:41:02.388 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-109] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.23:41:02.388 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-109] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-12.23:41:03.220 [scheduling-1    ] ERROR UpdateAwardStockJob    - 扣减库存失败
24-12-12.23:41:03.222 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.23:41:03.222 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-12.23:41:03.243 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-12.23:41:05.011 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
