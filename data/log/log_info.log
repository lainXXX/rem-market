24-12-13.00:21:52.552 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 18496 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-13.00:21:52.554 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-13.00:21:53.390 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-13.00:21:53.392 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-13.00:21:53.446 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 45 ms. Found 0 Redis repository interfaces.
24-12-13.00:21:53.868 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-13.00:21:53.986 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-13.00:21:53.993 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-13.00:21:53.993 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-13.00:21:54.165 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-13.00:21:54.165 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1563 ms
24-12-13.00:21:54.389 [main            ] INFO  Version                - Redisson 3.26.0
24-12-13.00:21:55.571 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-13.00:21:56.015 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-13.00:22:01.669 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-13.00:22:01.792 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-13.00:22:01.807 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-13.00:22:01.809 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-13.00:22:02.712 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3312f4f4:0/SimpleConnection@6caa4dc5 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 52096]
24-12-13.00:22:03.643 [main            ] INFO  Application            - Started Application in 11.48 seconds (JVM running for 12.798)
24-12-13.00:22:05.059 [RMI TCP Connection(1)-192.168.8.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-13.00:22:05.059 [RMI TCP Connection(1)-192.168.8.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-13.00:22:05.063 [RMI TCP Connection(1)-192.168.8.1] INFO  DispatcherServlet      - Completed initialization in 4 ms
24-12-13.00:22:05.336 [RMI TCP Connection(2)-192.168.8.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-13.00:22:06.594 [RMI TCP Connection(2)-192.168.8.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-13.00:22:14.343 [http-nio-8091-exec-2] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-13.00:22:14.786 [http-nio-8091-exec-2] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserRaffleConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=058163794197, orderTime=Thu Dec 12 23:30:26 CST 2024, status=CREATE)
24-12-13.00:22:14.787 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:058163794197
24-12-13.00:22:14.788 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-13.00:22:15.142 [http-nio-8091-exec-2] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-13.00:22:15.144 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 108 ruleModel: default
24-12-13.00:22:15.477 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
java.lang.NullPointerException: null
	at top.javarem.infrastructure.adapter.repository.StrategyRepository.queryUserTodayRaffleCount(StrategyRepository.java:415)
	at top.javarem.infrastructure.adapter.repository.StrategyRepository$$FastClassBySpringCGLIB$$67d448e6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.StrategyRepository$$EnhancerBySpringCGLIB$$cfea55df.queryUserTodayRaffleCount(<generated>)
	at top.javarem.domain.strategy.service.rule.tree.impl.LockLogicTreeNode.execute(LockLogicTreeNode.java:51)
	at top.javarem.domain.strategy.service.rule.tree.factory.engine.impl.DecisionTreeEngine.process(DecisionTreeEngine.java:44)
	at top.javarem.domain.strategy.service.raffle.DefaultRaffleStrategy.doRaffleLogicTree(DefaultRaffleStrategy.java:55)
	at top.javarem.domain.strategy.service.AbstractRaffleLogic.performRaffle(AbstractRaffleLogic.java:56)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:81)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
24-12-13.00:22:30.008 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:22:30.414 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:23:00.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:23:00.129 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:23:00.282 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:23:30.015 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:23:30.163 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:23:38.301 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-13.00:23:38.380 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-13.00:23:38.383 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-13.00:23:38.608 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-13.00:23:39.443 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-13.00:23:39.444 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-13.00:23:39.986 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-13.00:23:39.996 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-12-13.00:23:51.778 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 19996 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-13.00:23:51.780 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-13.00:23:52.508 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-13.00:23:52.509 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-13.00:23:52.564 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 42 ms. Found 0 Redis repository interfaces.
24-12-13.00:23:52.976 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-13.00:23:53.099 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-13.00:23:53.106 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-13.00:23:53.106 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-13.00:23:53.277 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-13.00:23:53.277 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1456 ms
24-12-13.00:23:53.493 [main            ] INFO  Version                - Redisson 3.26.0
24-12-13.00:23:54.757 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-13.00:23:55.183 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-13.00:24:00.912 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-13.00:24:01.035 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-13.00:24:01.049 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-13.00:24:01.052 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-13.00:24:01.590 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3312f4f4:0/SimpleConnection@6caa4dc5 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 52213]
24-12-13.00:24:02.357 [main            ] INFO  Application            - Started Application in 10.988 seconds (JVM running for 12.279)
24-12-13.00:24:02.886 [RMI TCP Connection(1)-192.168.8.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-13.00:24:02.886 [RMI TCP Connection(1)-192.168.8.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-13.00:24:02.889 [RMI TCP Connection(1)-192.168.8.1] INFO  DispatcherServlet      - Completed initialization in 3 ms
24-12-13.00:24:05.142 [RMI TCP Connection(3)-192.168.8.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-13.00:24:06.222 [RMI TCP Connection(3)-192.168.8.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-13.00:24:11.760 [http-nio-8091-exec-3] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-13.00:24:12.134 [http-nio-8091-exec-3] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserRaffleConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=058163794197, orderTime=Thu Dec 12 23:30:26 CST 2024, status=CREATE)
24-12-13.00:24:12.134 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:058163794197
24-12-13.00:24:12.135 [http-nio-8091-exec-3] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-13.00:24:12.455 [http-nio-8091-exec-3] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-13.00:24:12.456 [http-nio-8091-exec-3] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 105 ruleModel: default
24-12-13.00:24:12.979 [http-nio-8091-exec-3] INFO  LuckAwardLogicTreeNode - 规则树过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-13.00:24:12.980 [http-nio-8091-exec-3] INFO  AbstractRaffleLogic    - 规则树逻辑执行完毕执行- 结果为 奖品id 101 
24-12-13.00:24:13.441 [http-nio-8091-exec-3] ERROR AwardRepository        - 写入中奖记录，唯一索引冲突 userId: rem activityId: 100301 awardId: 101
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '058163794197' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '058163794197' for key 'user_award_record.uq_order_id'
; Duplicate entry '058163794197' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '058163794197' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$d73364e1.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$fed49b47.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '058163794197' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-13.00:24:13.600 [http-nio-8091-exec-3] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
top.javarem.types.exception.AppException: null
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:77)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$fed49b47.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '058163794197' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '058163794197' for key 'user_award_record.uq_order_id'
; Duplicate entry '058163794197' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '058163794197' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$d73364e1.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	... 68 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '058163794197' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-13.00:24:30.002 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:24:30.427 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:25:00.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:25:00.220 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:25:00.740 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:105
24-12-13.00:25:00.814 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:25:16.092 [http-nio-8091-exec-5] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-13.00:25:16.910 [http-nio-8091-exec-5] WARN  ActivityRepository     - 扣减账户额度失败 userId :rem activityId: 100301
24-12-13.00:25:17.037 [http-nio-8091-exec-5] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
top.javarem.types.exception.AppException: null
	at top.javarem.infrastructure.adapter.repository.ActivityRepository.lambda$saveCreatePartakeOrderAggregate$1(ActivityRepository.java:360)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository.saveCreatePartakeOrderAggregate(ActivityRepository.java:348)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$FastClassBySpringCGLIB$$ae16c582.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.saveCreatePartakeOrderAggregate(<generated>)
	at top.javarem.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:64)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:75)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.Throwable: 账户总定额不足
	at top.javarem.types.exception.AppException.<init>(AppException.java:30)
	... 69 common frames omitted
24-12-13.00:25:30.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:25:30.224 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:26:00.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:26:00.227 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:26:00.604 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:26:30.009 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:26:30.433 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:27:00.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:27:00.183 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:27:00.436 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:27:07.765 [http-nio-8091-exec-1] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-13.00:27:09.334 [http-nio-8091-exec-1] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:433821122706
24-12-13.00:27:09.335 [http-nio-8091-exec-1] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-13.00:27:09.642 [http-nio-8091-exec-1] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-13.00:27:09.642 [http-nio-8091-exec-1] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 101 ruleModel: default
24-12-13.00:27:10.002 [http-nio-8091-exec-1] INFO  LuckAwardLogicTreeNode - 规则树过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-13.00:27:10.003 [http-nio-8091-exec-1] INFO  AbstractRaffleLogic    - 规则树逻辑执行完毕执行- 结果为 奖品id 101 
24-12-13.00:27:10.600 [http-nio-8091-exec-1] INFO  EventPublisher         - 发送MQ消息 topic: send_award message: {"eventId":"IcfcfXLW0nd","timestamp":"Dec 13, 2024 12:27:10 AM","data":{"awardId":101,"userId":"rem","awardTitle":"随机积分"}}
24-12-13.00:27:10.662 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"eventId":"IcfcfXLW0nd","timestamp":"Dec 13, 2024 12:27:10 AM","data":{"awardId":101,"userId":"rem","awardTitle":"随机积分"}}
24-12-13.00:27:10.748 [http-nio-8091-exec-1] INFO  AwardRepository        - 写入中奖记录，发送MQ消息完成 userId: rem orderId:433821122706 topic: send_award
24-12-13.00:27:30.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:27:30.339 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:27:46.637 [http-nio-8091-exec-13] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-13.00:27:47.044 [http-nio-8091-exec-13] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserRaffleConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=433821122706, orderTime=Fri Dec 13 00:27:09 CST 2024, status=CREATE)
24-12-13.00:27:47.044 [http-nio-8091-exec-13] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:433821122706
24-12-13.00:27:47.044 [http-nio-8091-exec-13] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-13.00:27:47.394 [http-nio-8091-exec-13] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-13.00:27:47.394 [http-nio-8091-exec-13] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 106 ruleModel: default
24-12-13.00:27:47.907 [http-nio-8091-exec-13] INFO  LuckAwardLogicTreeNode - 规则树过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-13.00:27:47.907 [http-nio-8091-exec-13] INFO  AbstractRaffleLogic    - 规则树逻辑执行完毕执行- 结果为 奖品id 101 
24-12-13.00:27:48.183 [http-nio-8091-exec-13] ERROR AwardRepository        - 写入中奖记录，唯一索引冲突 userId: rem activityId: 100301 awardId: 101
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '433821122706' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '433821122706' for key 'user_award_record.uq_order_id'
; Duplicate entry '433821122706' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '433821122706' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$d73364e1.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$fed49b47.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '433821122706' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-13.00:27:48.301 [http-nio-8091-exec-13] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
top.javarem.types.exception.AppException: null
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:77)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$fed49b47.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '433821122706' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '433821122706' for key 'user_award_record.uq_order_id'
; Duplicate entry '433821122706' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '433821122706' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$d73364e1.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	... 68 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '433821122706' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-13.00:28:00.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:28:00.629 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:101
24-12-13.00:28:00.863 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:106
24-12-13.00:28:00.920 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:28:00.982 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:28:17.861 [http-nio-8091-exec-10] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-13.00:28:19.237 [http-nio-8091-exec-10] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
org.springframework.jdbc.BadSqlGrammarException: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', update_time = now()       WHERE  (user_id = 'rem' AND activity_id = 100301 AND' at line 1
### The error may exist in top/javarem/infrastructure/dao/mapper/RaffleActivityAccountDayCountMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.RaffleActivityAccountDayCountMapper.update-Inline
### The error occurred while setting parameters
### SQL: UPDATE raffle_activity_account_day_count  SET day_count_surplus = month_count_surplus - 1, , update_time = now()       WHERE  (user_id = ? AND activity_id = ? AND day = ?)
### Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', update_time = now()       WHERE  (user_id = 'rem' AND activity_id = 100301 AND' at line 1
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', update_time = now()       WHERE  (user_id = 'rem' AND activity_id = 100301 AND' at line 1
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:239)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:288)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:64)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy102.update(Unknown Source)
	at com.baomidou.mybatisplus.extension.conditions.update.ChainUpdate.lambda$update$eb4b7d7c$1(ChainUpdate.java:46)
	at com.baomidou.mybatisplus.extension.conditions.ChainWrapper.execute(ChainWrapper.java:63)
	at com.baomidou.mybatisplus.extension.conditions.update.ChainUpdate.update(ChainUpdate.java:46)
	at com.baomidou.mybatisplus.extension.conditions.update.ChainUpdate.update(ChainUpdate.java:36)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository.lambda$saveCreatePartakeOrderAggregate$1(ActivityRepository.java:396)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository.saveCreatePartakeOrderAggregate(ActivityRepository.java:348)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$FastClassBySpringCGLIB$$ae16c582.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.saveCreatePartakeOrderAggregate(<generated>)
	at top.javarem.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:64)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:75)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', update_time = now()       WHERE  (user_id = 'rem' AND activity_id = 100301 AND' at line 1
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 79 common frames omitted
24-12-13.00:28:23.387 [http-nio-8091-exec-6] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-13.00:28:24.782 [http-nio-8091-exec-6] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
org.springframework.jdbc.BadSqlGrammarException: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', update_time = now()       WHERE  (user_id = 'rem' AND activity_id = 100301 AND' at line 1
### The error may exist in top/javarem/infrastructure/dao/mapper/RaffleActivityAccountDayCountMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.RaffleActivityAccountDayCountMapper.update-Inline
### The error occurred while setting parameters
### SQL: UPDATE raffle_activity_account_day_count  SET day_count_surplus = month_count_surplus - 1, , update_time = now()       WHERE  (user_id = ? AND activity_id = ? AND day = ?)
### Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', update_time = now()       WHERE  (user_id = 'rem' AND activity_id = 100301 AND' at line 1
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', update_time = now()       WHERE  (user_id = 'rem' AND activity_id = 100301 AND' at line 1
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:239)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:288)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:64)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy102.update(Unknown Source)
	at com.baomidou.mybatisplus.extension.conditions.update.ChainUpdate.lambda$update$eb4b7d7c$1(ChainUpdate.java:46)
	at com.baomidou.mybatisplus.extension.conditions.ChainWrapper.execute(ChainWrapper.java:63)
	at com.baomidou.mybatisplus.extension.conditions.update.ChainUpdate.update(ChainUpdate.java:46)
	at com.baomidou.mybatisplus.extension.conditions.update.ChainUpdate.update(ChainUpdate.java:36)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository.lambda$saveCreatePartakeOrderAggregate$1(ActivityRepository.java:396)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository.saveCreatePartakeOrderAggregate(ActivityRepository.java:348)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$FastClassBySpringCGLIB$$ae16c582.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.saveCreatePartakeOrderAggregate(<generated>)
	at top.javarem.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:64)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:75)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', update_time = now()       WHERE  (user_id = 'rem' AND activity_id = 100301 AND' at line 1
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 79 common frames omitted
24-12-13.00:28:30.005 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:28:30.347 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:29:00.015 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:29:00.145 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:29:00.216 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:29:30.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:29:44.804 [AMQP Connection 110.41.180.185:5672] WARN  ForgivingExceptionHandler - An unexpected connection driver error occurred (Exception message: Connection reset)
24-12-13.00:29:44.806 [redisson-netty-1-12] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0xf75a176f, L:/192.168.38.111:52210 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-13.00:29:44.972 [redisson-netty-1-8] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0x2f92f5b0, L:/192.168.38.111:52208 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-13.00:29:44.806 [redisson-netty-1-2] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0xcfd298ce, L:/192.168.38.111:52205 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-13.00:29:44.970 [redisson-netty-1-5] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0x9de93cbb, L:/192.168.38.111:52207 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-13.00:29:44.806 [redisson-netty-1-10] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0x56d72fcf, L:/192.168.38.111:52209 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-13.00:29:44.973 [redisson-netty-1-3] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0xbd96e938, L:/192.168.38.111:52206 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-13.00:29:45.058 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  SimpleMessageListenerContainer - Restarting Consumer@54defd69: tags=[[amq.ctag-Aq1zRtxZqs2USMvEOZpDCg]], channel=Cached Rabbit Channel: AMQChannel(amqp://lain@110.41.180.185:5672/,1), conn: Proxy@58e02359 Shared Rabbit Connection: SimpleConnection@6caa4dc5 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 52213], acknowledgeMode=AUTO local queue size=0
24-12-13.00:29:45.084 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-13.00:29:45.088 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
org.springframework.amqp.AmqpIOException: java.net.SocketException: Network is unreachable: connect
	at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:70)
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:603)
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:725)
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createBareChannel(CachingConnectionFactory.java:676)
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.getCachedChannelProxy(CachingConnectionFactory.java:650)
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.getChannel(CachingConnectionFactory.java:540)
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.access$1600(CachingConnectionFactory.java:100)
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory$ChannelCachingConnectionProxy.createChannel(CachingConnectionFactory.java:1418)
	at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2216)
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2183)
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2163)
	at org.springframework.amqp.rabbit.core.RabbitAdmin.getQueueInfo(RabbitAdmin.java:463)
	at org.springframework.amqp.rabbit.core.RabbitAdmin.getQueueProperties(RabbitAdmin.java:447)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.attemptDeclarations(AbstractMessageListenerContainer.java:1942)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.redeclareElementsIfNecessary(AbstractMessageListenerContainer.java:1915)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.initialize(SimpleMessageListenerContainer.java:1384)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1230)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.net.SocketException: Network is unreachable: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at com.rabbitmq.client.impl.SocketFrameHandlerFactory.create(SocketFrameHandlerFactory.java:60)
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1223)
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1173)
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:641)
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:616)
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:566)
	... 16 common frames omitted
24-12-13.00:29:45.088 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-13.00:29:45.175 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SimpleMessageListenerContainer - Restarting Consumer@ff1f465: tags=[[amq.ctag-5B_E_DzDmOObZ6M0Q-MKmA]], channel=Cached Rabbit Channel: AMQChannel(amqp://lain@110.41.180.185:5672/,2), conn: Proxy@58e02359 Shared Rabbit Connection: null, acknowledgeMode=AUTO local queue size=0
24-12-13.00:29:45.181 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-13.00:29:45.183 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] ERROR SimpleMessageListenerContainer - Failed to check/redeclare auto-delete queue(s).
org.springframework.amqp.AmqpIOException: java.net.SocketException: Network is unreachable: connect
	at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:70)
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:603)
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:725)
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:252)
	at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2210)
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2183)
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2163)
	at org.springframework.amqp.rabbit.core.RabbitAdmin.getQueueInfo(RabbitAdmin.java:463)
	at org.springframework.amqp.rabbit.core.RabbitAdmin.getQueueProperties(RabbitAdmin.java:447)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.attemptDeclarations(AbstractMessageListenerContainer.java:1942)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.redeclareElementsIfNecessary(AbstractMessageListenerContainer.java:1915)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.initialize(SimpleMessageListenerContainer.java:1384)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1230)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.net.SocketException: Network is unreachable: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at com.rabbitmq.client.impl.SocketFrameHandlerFactory.create(SocketFrameHandlerFactory.java:60)
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1223)
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1173)
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:641)
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:616)
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:566)
	... 12 common frames omitted
24-12-13.00:29:45.183 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-13.00:29:45.683 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.dao.QueryTimeoutException: Redis server response timeout (3000 ms) occured after 3 retry attempts, is non-idempotent command: false Check connection with Redis node: 110.41.180.185/110.41.180.185:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_], channel: [id: 0x2f92f5b0, L:/192.168.38.111:52208 ! R:110.41.180.185/110.41.180.185:6379]; nested exception is org.redisson.client.RedisResponseTimeoutException: Redis server response timeout (3000 ms) occured after 3 retry attempts, is non-idempotent command: false Check connection with Redis node: 110.41.180.185/110.41.180.185:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_], channel: [id: 0x2f92f5b0, L:/192.168.38.111:52208 ! R:110.41.180.185/110.41.180.185:6379]
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:48)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.RedisResponseTimeoutException: Redis server response timeout (3000 ms) occured after 3 retry attempts, is non-idempotent command: false Check connection with Redis node: 110.41.180.185/110.41.180.185:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_], channel: [id: 0x2f92f5b0, L:/192.168.38.111:52208 ! R:110.41.180.185/110.41.180.185:6379]
	at org.redisson.command.RedisExecutor.lambda$scheduleResponseTimeout$9(RedisExecutor.java:431)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.run(HashedWheelTimer.java:715)
	at io.netty.util.concurrent.ImmediateExecutor.execute(ImmediateExecutor.java:34)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.expire(HashedWheelTimer.java:703)
	at io.netty.util.HashedWheelTimer$HashedWheelBucket.expireTimeouts(HashedWheelTimer.java:790)
	at io.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:503)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
24-12-13.00:29:45.684 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:29:45.692 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@204e5a31 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:29:45.696 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@fd975bf (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:29:45.699 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@5d9439a7 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:29:45.702 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@40f1da13 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:29:45.705 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@2126de58 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:29:45.707 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@6596234e (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:29:45.710 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@19b3675a (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:29:45.714 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@409fd790 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:29:45.718 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@1447009e (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:29:45.722 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@16cc3cfb (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:29:46.872 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-13.00:29:46.873 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-13.00:29:46.873 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-13.00:29:46.873 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-13.00:30:00.275 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 23404 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-13.00:30:00.277 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-13.00:30:01.075 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-13.00:30:01.077 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-13.00:30:01.139 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 51 ms. Found 0 Redis repository interfaces.
24-12-13.00:30:01.560 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-13.00:30:01.689 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-13.00:30:01.696 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-13.00:30:01.697 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-13.00:30:01.865 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-13.00:30:01.865 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1542 ms
24-12-13.00:30:02.086 [main            ] INFO  Version                - Redisson 3.26.0
24-12-13.00:30:25.721 [main            ] WARN  AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'activityRepository': Unsatisfied dependency expressed through field 'redissonClient'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'redissonClient' defined in class path resource [top/javarem/config/RedisClientConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.redisson.api.RedissonClient]: Factory method 'redissonClient' threw exception; nested exception is org.redisson.client.RedisConnectionException: java.util.concurrent.ExecutionException: org.redisson.client.RedisConnectionException: Unable to connect to Redis server: 110.41.180.185/110.41.180.185:6379
24-12-13.00:30:25.725 [main            ] INFO  StandardService        - Stopping service [Tomcat]
24-12-13.00:30:25.746 [main            ] INFO  ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
24-12-13.00:30:25.836 [main            ] ERROR SpringApplication      - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'activityRepository': Unsatisfied dependency expressed through field 'redissonClient'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'redissonClient' defined in class path resource [top/javarem/config/RedisClientConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.redisson.api.RedissonClient]: Factory method 'redissonClient' threw exception; nested exception is org.redisson.client.RedisConnectionException: java.util.concurrent.ExecutionException: org.redisson.client.RedisConnectionException: Unable to connect to Redis server: 110.41.180.185/110.41.180.185:6379
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:920)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)
	at top.javarem.Application.main(Application.java:14)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'redissonClient' defined in class path resource [top/javarem/config/RedisClientConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.redisson.api.RedissonClient]: Factory method 'redissonClient' threw exception; nested exception is org.redisson.client.RedisConnectionException: java.util.concurrent.ExecutionException: org.redisson.client.RedisConnectionException: Unable to connect to Redis server: 110.41.180.185/110.41.180.185:6379
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)
	... 20 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.redisson.api.RedissonClient]: Factory method 'redissonClient' threw exception; nested exception is org.redisson.client.RedisConnectionException: java.util.concurrent.ExecutionException: org.redisson.client.RedisConnectionException: Unable to connect to Redis server: 110.41.180.185/110.41.180.185:6379
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 33 common frames omitted
Caused by: org.redisson.client.RedisConnectionException: java.util.concurrent.ExecutionException: org.redisson.client.RedisConnectionException: Unable to connect to Redis server: 110.41.180.185/110.41.180.185:6379
	at org.redisson.connection.MasterSlaveConnectionManager.doConnect(MasterSlaveConnectionManager.java:229)
	at org.redisson.connection.MasterSlaveConnectionManager.connect(MasterSlaveConnectionManager.java:196)
	at org.redisson.config.ConfigSupport.createConnectionManager(ConfigSupport.java:220)
	at org.redisson.Redisson.<init>(Redisson.java:71)
	at org.redisson.Redisson.create(Redisson.java:116)
	at top.javarem.config.RedisClientConfig.redissonClient(RedisClientConfig.java:51)
	at top.javarem.config.RedisClientConfig$$EnhancerBySpringCGLIB$$74c301a4.CGLIB$redissonClient$0(<generated>)
	at top.javarem.config.RedisClientConfig$$EnhancerBySpringCGLIB$$74c301a4$$FastClassBySpringCGLIB$$71e5f0ef.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at top.javarem.config.RedisClientConfig$$EnhancerBySpringCGLIB$$74c301a4.redissonClient(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)
	... 34 common frames omitted
Caused by: java.util.concurrent.ExecutionException: org.redisson.client.RedisConnectionException: Unable to connect to Redis server: 110.41.180.185/110.41.180.185:6379
	at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:357)
	at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1915)
	at org.redisson.connection.MasterSlaveConnectionManager.doConnect(MasterSlaveConnectionManager.java:225)
	... 49 common frames omitted
Caused by: org.redisson.client.RedisConnectionException: Unable to connect to Redis server: 110.41.180.185/110.41.180.185:6379
	at org.redisson.connection.ConnectionsHolder.lambda$createConnection$1(ConnectionsHolder.java:183)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:760)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:736)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:474)
	at java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:1977)
	at org.redisson.connection.ConnectionsHolder.promiseFailure(ConnectionsHolder.java:218)
	at org.redisson.connection.ConnectionsHolder.lambda$createConnection$4(ConnectionsHolder.java:204)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:760)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:736)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:474)
	at java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:1977)
	at org.redisson.client.RedisClient$1$2.run(RedisClient.java:308)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.util.concurrent.CompletionException: io.netty.channel.ConnectTimeoutException: connection timed out: 110.41.180.185/110.41.180.185:6379
	at java.util.concurrent.CompletableFuture.encodeRelay(CompletableFuture.java:326)
	at java.util.concurrent.CompletableFuture.completeRelay(CompletableFuture.java:338)
	at java.util.concurrent.CompletableFuture.uniRelay(CompletableFuture.java:911)
	at java.util.concurrent.CompletableFuture$UniRelay.tryFire(CompletableFuture.java:899)
	... 11 common frames omitted
Caused by: io.netty.channel.ConnectTimeoutException: connection timed out: 110.41.180.185/110.41.180.185:6379
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe$1.run(AbstractNioChannel.java:261)
	at io.netty.util.concurrent.PromiseTask.runTask(PromiseTask.java:98)
	at io.netty.util.concurrent.ScheduledFutureTask.run(ScheduledFutureTask.java:153)
	... 8 common frames omitted
24-12-13.00:30:34.932 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 5412 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-13.00:30:34.936 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-13.00:30:36.159 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-13.00:30:36.161 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-13.00:30:36.244 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 68 ms. Found 0 Redis repository interfaces.
24-12-13.00:30:36.902 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-13.00:30:37.103 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-13.00:30:37.116 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-13.00:30:37.116 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-13.00:30:37.393 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-13.00:30:37.394 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2401 ms
24-12-13.00:30:37.751 [main            ] INFO  Version                - Redisson 3.26.0
24-12-13.00:30:56.739 [main            ] WARN  AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'activityRepository': Unsatisfied dependency expressed through field 'redissonClient'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'redissonClient' defined in class path resource [top/javarem/config/RedisClientConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.redisson.api.RedissonClient]: Factory method 'redissonClient' threw exception; nested exception is org.redisson.client.RedisConnectionException: java.util.concurrent.ExecutionException: org.redisson.client.RedisConnectionException: Unable to connect to Redis server: 110.41.180.185/110.41.180.185:6379
24-12-13.00:30:56.744 [main            ] INFO  StandardService        - Stopping service [Tomcat]
24-12-13.00:30:56.766 [main            ] INFO  ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
24-12-13.00:30:56.802 [main            ] ERROR SpringApplication      - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'activityRepository': Unsatisfied dependency expressed through field 'redissonClient'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'redissonClient' defined in class path resource [top/javarem/config/RedisClientConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.redisson.api.RedissonClient]: Factory method 'redissonClient' threw exception; nested exception is org.redisson.client.RedisConnectionException: java.util.concurrent.ExecutionException: org.redisson.client.RedisConnectionException: Unable to connect to Redis server: 110.41.180.185/110.41.180.185:6379
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:920)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)
	at top.javarem.Application.main(Application.java:14)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'redissonClient' defined in class path resource [top/javarem/config/RedisClientConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.redisson.api.RedissonClient]: Factory method 'redissonClient' threw exception; nested exception is org.redisson.client.RedisConnectionException: java.util.concurrent.ExecutionException: org.redisson.client.RedisConnectionException: Unable to connect to Redis server: 110.41.180.185/110.41.180.185:6379
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)
	... 20 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.redisson.api.RedissonClient]: Factory method 'redissonClient' threw exception; nested exception is org.redisson.client.RedisConnectionException: java.util.concurrent.ExecutionException: org.redisson.client.RedisConnectionException: Unable to connect to Redis server: 110.41.180.185/110.41.180.185:6379
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 33 common frames omitted
Caused by: org.redisson.client.RedisConnectionException: java.util.concurrent.ExecutionException: org.redisson.client.RedisConnectionException: Unable to connect to Redis server: 110.41.180.185/110.41.180.185:6379
	at org.redisson.connection.MasterSlaveConnectionManager.doConnect(MasterSlaveConnectionManager.java:229)
	at org.redisson.connection.MasterSlaveConnectionManager.connect(MasterSlaveConnectionManager.java:196)
	at org.redisson.config.ConfigSupport.createConnectionManager(ConfigSupport.java:220)
	at org.redisson.Redisson.<init>(Redisson.java:71)
	at org.redisson.Redisson.create(Redisson.java:116)
	at top.javarem.config.RedisClientConfig.redissonClient(RedisClientConfig.java:51)
	at top.javarem.config.RedisClientConfig$$EnhancerBySpringCGLIB$$52a58f0c.CGLIB$redissonClient$0(<generated>)
	at top.javarem.config.RedisClientConfig$$EnhancerBySpringCGLIB$$52a58f0c$$FastClassBySpringCGLIB$$350e02a0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at top.javarem.config.RedisClientConfig$$EnhancerBySpringCGLIB$$52a58f0c.redissonClient(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)
	... 34 common frames omitted
Caused by: java.util.concurrent.ExecutionException: org.redisson.client.RedisConnectionException: Unable to connect to Redis server: 110.41.180.185/110.41.180.185:6379
	at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:357)
	at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1915)
	at org.redisson.connection.MasterSlaveConnectionManager.doConnect(MasterSlaveConnectionManager.java:225)
	... 49 common frames omitted
Caused by: org.redisson.client.RedisConnectionException: Unable to connect to Redis server: 110.41.180.185/110.41.180.185:6379
	at org.redisson.connection.ConnectionsHolder.lambda$createConnection$1(ConnectionsHolder.java:183)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:760)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:736)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:474)
	at java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:1977)
	at org.redisson.connection.ConnectionsHolder.promiseFailure(ConnectionsHolder.java:218)
	at org.redisson.connection.ConnectionsHolder.lambda$createConnection$4(ConnectionsHolder.java:204)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:760)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:736)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:474)
	at java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:1977)
	at org.redisson.client.RedisClient$1$2.run(RedisClient.java:308)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.util.concurrent.CompletionException: io.netty.channel.AbstractChannel$AnnotatedNoRouteToHostException: No route to host: no further information: 110.41.180.185/110.41.180.185:6379
	at java.util.concurrent.CompletableFuture.encodeRelay(CompletableFuture.java:326)
	at java.util.concurrent.CompletableFuture.completeRelay(CompletableFuture.java:338)
	at java.util.concurrent.CompletableFuture.uniRelay(CompletableFuture.java:911)
	at java.util.concurrent.CompletableFuture$UniRelay.tryFire(CompletableFuture.java:899)
	... 11 common frames omitted
Caused by: io.netty.channel.AbstractChannel$AnnotatedNoRouteToHostException: No route to host: no further information: 110.41.180.185/110.41.180.185:6379
Caused by: java.net.NoRouteToHostException: No route to host: no further information
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-13.00:31:39.929 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 23064 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-13.00:31:39.933 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-13.00:31:41.131 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-13.00:31:41.133 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-13.00:31:41.218 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 70 ms. Found 0 Redis repository interfaces.
24-12-13.00:31:41.893 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-13.00:31:42.075 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-13.00:31:42.088 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-13.00:31:42.088 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-13.00:31:42.287 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-13.00:31:42.287 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2297 ms
24-12-13.00:31:42.552 [main            ] INFO  Version                - Redisson 3.26.0
24-12-13.00:31:43.426 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-13.00:31:43.883 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-13.00:31:49.735 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-13.00:31:49.836 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-13.00:31:49.848 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-13.00:31:49.850 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-13.00:31:50.515 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3312f4f4:0/SimpleConnection@6caa4dc5 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 52560]
24-12-13.00:31:51.468 [main            ] INFO  Application            - Started Application in 12.174 seconds (JVM running for 14.253)
24-12-13.00:31:52.908 [RMI TCP Connection(1)-192.168.8.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-13.00:31:52.909 [RMI TCP Connection(1)-192.168.8.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-13.00:31:52.912 [RMI TCP Connection(1)-192.168.8.1] INFO  DispatcherServlet      - Completed initialization in 3 ms
24-12-13.00:31:53.110 [RMI TCP Connection(2)-192.168.8.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-13.00:31:54.438 [RMI TCP Connection(2)-192.168.8.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-13.00:32:00.007 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:32:00.231 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:32:00.308 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:32:01.482 [http-nio-8091-exec-1] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-13.00:32:02.640 [http-nio-8091-exec-1] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
org.springframework.jdbc.BadSqlGrammarException: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'month_count_surplus' in 'field list'
### The error may exist in top/javarem/infrastructure/dao/mapper/RaffleActivityAccountDayCountMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.RaffleActivityAccountDayCountMapper.update-Inline
### The error occurred while setting parameters
### SQL: UPDATE raffle_activity_account_day_count  SET day_count_surplus = month_count_surplus - 1, update_time = now()       WHERE  (user_id = ? AND activity_id = ? AND day = ?)
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'month_count_surplus' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'month_count_surplus' in 'field list'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:239)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:288)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:64)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy102.update(Unknown Source)
	at com.baomidou.mybatisplus.extension.conditions.update.ChainUpdate.lambda$update$eb4b7d7c$1(ChainUpdate.java:46)
	at com.baomidou.mybatisplus.extension.conditions.ChainWrapper.execute(ChainWrapper.java:63)
	at com.baomidou.mybatisplus.extension.conditions.update.ChainUpdate.update(ChainUpdate.java:46)
	at com.baomidou.mybatisplus.extension.conditions.update.ChainUpdate.update(ChainUpdate.java:36)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository.lambda$saveCreatePartakeOrderAggregate$1(ActivityRepository.java:396)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository.saveCreatePartakeOrderAggregate(ActivityRepository.java:348)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$FastClassBySpringCGLIB$$ae16c582.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.saveCreatePartakeOrderAggregate(<generated>)
	at top.javarem.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:64)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:75)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLSyntaxErrorException: Unknown column 'month_count_surplus' in 'field list'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 79 common frames omitted
24-12-13.00:32:30.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:32:30.268 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:33:00.001 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:33:00.070 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:33:00.191 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:33:30.022 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:33:30.584 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:33:48.145 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-13.00:33:48.213 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-13.00:33:48.409 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-13.00:33:48.721 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-13.00:33:49.580 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-13.00:33:49.581 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-13.00:33:50.167 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-13.00:33:50.178 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-12-13.00:34:01.684 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 23232 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-13.00:34:01.687 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-13.00:34:02.417 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-13.00:34:02.419 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-13.00:34:02.472 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 42 ms. Found 0 Redis repository interfaces.
24-12-13.00:34:02.882 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-13.00:34:02.998 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-13.00:34:03.005 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-13.00:34:03.005 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-13.00:34:03.160 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-13.00:34:03.160 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1428 ms
24-12-13.00:34:03.381 [main            ] INFO  Version                - Redisson 3.26.0
24-12-13.00:34:04.554 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-13.00:34:05.023 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-13.00:34:10.726 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-13.00:34:10.849 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-13.00:34:10.862 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-13.00:34:10.865 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-13.00:34:11.471 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3312f4f4:0/SimpleConnection@6caa4dc5 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 52689]
24-12-13.00:34:12.381 [main            ] INFO  Application            - Started Application in 11.101 seconds (JVM running for 12.426)
24-12-13.00:34:13.823 [RMI TCP Connection(2)-192.168.8.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-13.00:34:13.824 [RMI TCP Connection(2)-192.168.8.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-13.00:34:13.827 [RMI TCP Connection(2)-192.168.8.1] INFO  DispatcherServlet      - Completed initialization in 3 ms
24-12-13.00:34:14.015 [RMI TCP Connection(1)-192.168.8.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-13.00:34:15.304 [RMI TCP Connection(1)-192.168.8.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-13.00:34:22.806 [http-nio-8091-exec-2] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-13.00:34:24.215 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:509558131247
24-12-13.00:34:24.217 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-13.00:34:24.548 [http-nio-8091-exec-2] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-13.00:34:24.549 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 102 ruleModel: default
24-12-13.00:34:25.021 [http-nio-8091-exec-2] INFO  LuckAwardLogicTreeNode - 规则树过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-13.00:34:25.022 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 规则树逻辑执行完毕执行- 结果为 奖品id 101 
24-12-13.00:34:25.581 [http-nio-8091-exec-2] INFO  EventPublisher         - 发送MQ消息 topic: send_award message: {"eventId":"iaXDixwST1T","timestamp":"Dec 13, 2024 12:34:25 AM","data":{"awardId":101,"userId":"rem","awardTitle":"随机积分"}}
24-12-13.00:34:25.644 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"eventId":"iaXDixwST1T","timestamp":"Dec 13, 2024 12:34:25 AM","data":{"awardId":101,"userId":"rem","awardTitle":"随机积分"}}
24-12-13.00:34:25.717 [http-nio-8091-exec-2] INFO  AwardRepository        - 写入中奖记录，发送MQ消息完成 userId: rem orderId:509558131247 topic: send_award
24-12-13.00:34:30.011 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:34:30.395 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:35:00.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:35:00.066 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:35:00.389 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:102
24-12-13.00:35:00.463 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:35:30.002 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:35:30.493 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:36:00.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:36:00.076 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:36:00.232 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:36:30.005 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:36:30.495 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:37:00.014 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:37:00.168 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:37:00.239 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:37:30.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:37:30.320 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:38:00.006 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:38:00.257 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:38:00.327 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:38:30.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:38:30.304 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:39:00.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:39:00.217 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:39:00.347 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:39:30.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:39:30.210 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:40:00.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:40:00.079 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:40:00.157 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:40:30.013 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:40:30.386 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:41:00.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:41:00.068 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:41:00.192 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:41:30.000 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:41:30.219 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:42:00.010 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:42:00.135 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:42:00.191 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:42:30.001 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:42:30.536 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:43:00.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:43:00.084 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:43:00.232 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:43:30.012 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:43:30.640 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:44:00.012 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:44:00.284 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:44:00.364 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:44:30.003 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:44:30.441 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:45:00.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:45:15.687 [scheduling-1    ] ERROR UpdateAwardStockJob    - 扣减库存失败
24-12-13.00:45:15.688 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:45:20.702 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@2ca16bfe (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:45:21.688 [redisson-netty-1-12] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0x7ad97f4a, L:/192.168.38.111:52686 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-13.00:45:25.246 [redisson-netty-1-10] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0xc0dab27d, L:/192.168.38.111:52685 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-13.00:45:25.720 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@32d722d8 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:45:27.104 [redisson-netty-1-8] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0x31025525, L:/192.168.38.111:52684 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-13.00:45:29.469 [redisson-netty-1-2] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0x2f3dea77, L:/192.168.38.111:52680 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-13.00:45:30.724 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@236d4767 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:45:35.740 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@74d068cd (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:45:40.751 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@18fca200 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:45:40.986 [redisson-netty-1-5] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0x99e3a4c0, L:/192.168.38.111:52682 - R:110.41.180.185/110.41.180.185:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
24-12-13.00:45:44.354 [AMQP Connection 110.41.180.185:5672] WARN  ForgivingExceptionHandler - An unexpected connection driver error occurred (Exception message: Connection reset)
24-12-13.00:45:44.702 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  SimpleMessageListenerContainer - Restarting Consumer@54defd69: tags=[[amq.ctag-Y8EBq_R5w1beQMsRBkIprA]], channel=Cached Rabbit Channel: AMQChannel(amqp://lain@110.41.180.185:5672/,1), conn: Proxy@58e02359 Shared Rabbit Connection: SimpleConnection@6caa4dc5 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 52689], acknowledgeMode=AUTO local queue size=0
24-12-13.00:45:44.708 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-13.00:45:45.025 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SimpleMessageListenerContainer - Restarting Consumer@ff1f465: tags=[[amq.ctag-IPYJ4iKHiPthZojVb-MVJA]], channel=Cached Rabbit Channel: AMQChannel(amqp://lain@110.41.180.185:5672/,2), conn: Proxy@58e02359 Shared Rabbit Connection: null, acknowledgeMode=AUTO local queue size=0
24-12-13.00:45:45.761 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@268214f6 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:45:45.768 [scheduling-1    ] ERROR SendMessageTaskJob     - 定时任务，扫描MQ任务表发送消息失败。
org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30074ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30074ms.
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:97)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy107.queryNoSendMessageTaskList(Unknown Source)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl.queryNoSendMessageTaskList(TaskServiceImpl.java:31)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$FastClassBySpringCGLIB$$f2346e0c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.TaskServiceImpl$$EnhancerBySpringCGLIB$$be5d91c3.queryNoSendMessageTaskList(<generated>)
	at top.javarem.infrastructure.adapter.repository.TaskRepository.queryNoSendMessageTaskList(TaskRepository.java:31)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$FastClassBySpringCGLIB$$4c8338f8.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.TaskRepository$$EnhancerBySpringCGLIB$$bbcc155.queryNoSendMessageTaskList(<generated>)
	at top.javarem.domain.task.service.TaskService.queryNoSendMessageTaskList(TaskService.java:23)
	at top.javarem.trigger.job.SendMessageTaskJob.execute(SendMessageTaskJob.java:33)
	at sun.reflect.GeneratedMethodAccessor49.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30074ms.
### The error may exist in file [D:\Develop\project\rem-market\market-app\target\classes\mapper\TaskMapper.xml]
### The error may involve top.javarem.infrastructure.dao.mapper.TaskMapper.queryNoSendMessageTaskList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30074ms.
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:156)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at sun.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 40 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30074ms.
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:83)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:80)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:67)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:64)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	... 46 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30074ms.
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:197)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:162)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
	... 56 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: No operations allowed after connection closed.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2495)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:566)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionAlive(PoolBase.java:173)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:186)
	... 61 common frames omitted
Caused by: com.mysql.cj.exceptions.ConnectionIsClosedException: No operations allowed after connection closed.
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.NativeSession.checkClosed(NativeSession.java:1171)
	at com.mysql.cj.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:573)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2491)
	... 64 common frames omitted
24-12-13.00:45:45.768 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:45:48.977 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务失败
org.springframework.data.redis.RedisConnectionFailureException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@803115991 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x99e3a4c0, L:/192.168.38.111:52682 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts; nested exception is org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@803115991 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x99e3a4c0, L:/192.168.38.111:52682 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:40)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e4e68d33.isEmptySkuStockDecrQueue(<generated>)
	at top.javarem.domain.activity.service.quota.RaffleActivityActivityService.isEmptySkuStockDecrQueue(RaffleActivityActivityService.java:72)
	at top.javarem.trigger.job.UpdateActivitySkuStockJob.executeActivitySkuStockJob(UpdateActivitySkuStockJob.java:26)
	at sun.reflect.GeneratedMethodAccessor50.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.redisson.client.WriteRedisConnectionException: Unable to write command into connection! Check CPU usage of the JVM. Try to increase nettyThreads setting. Node source: NodeSource [slot=0, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@803115991 [redisClient=[addr=redis://110.41.180.185:6379], channel=[id: 0x99e3a4c0, L:/192.168.38.111:52682 ! R:110.41.180.185/110.41.180.185:6379], currentCommand=null, usage=1], command: (LLEN), params: [rem_market_activity_sku_stock_decr_queue_key_] after 3 retry attempts
	at org.redisson.command.RedisExecutor.checkWriteFuture(RedisExecutor.java:351)
	at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:189)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.safeSetFailure(AbstractChannel.java:999)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:860)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:877)
	at io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:940)
	at io.netty.channel.AbstractChannelHandlerContext$WriteTask.run(AbstractChannelHandlerContext.java:1247)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
Caused by: io.netty.channel.StacklessClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(Object, ChannelPromise)(Unknown Source)
24-12-13.00:45:51.992 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3312f4f4:1/SimpleConnection@284f24c4 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 52774]
24-12-13.00:46:00.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:46:00.068 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:46:05.073 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@5dec2d14 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:46:10.089 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@39a5cbf9 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:46:15.110 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@1df01d25 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:46:20.120 [scheduling-1    ] WARN  PoolBase               - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@5132b159 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
24-12-13.00:46:20.318 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:46:30.009 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:46:30.453 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:46:32.817 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-13.00:46:33.123 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-13.00:46:33.125 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-13.00:46:34.041 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-13.00:46:35.007 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-13.00:46:35.007 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-13.00:46:37.311 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-13.00:46:37.321 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-12-13.00:49:29.116 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 9220 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-13.00:49:29.117 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-13.00:49:30.014 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-13.00:49:30.015 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-13.00:49:30.087 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 0 Redis repository interfaces.
24-12-13.00:49:30.657 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-13.00:49:30.743 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-13.00:49:30.751 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-13.00:49:30.751 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-13.00:49:30.969 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-13.00:49:30.969 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1815 ms
24-12-13.00:49:31.266 [main            ] INFO  Version                - Redisson 3.26.0
24-12-13.00:49:32.192 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-13.00:49:32.663 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-13.00:49:38.620 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-13.00:49:38.757 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-13.00:49:38.775 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-13.00:49:38.778 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-13.00:49:39.045 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#54556723:0/SimpleConnection@426913c4 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 52919]
24-12-13.00:49:39.847 [main            ] INFO  Application            - Started Application in 11.223 seconds (JVM running for 13.445)
24-12-13.00:49:42.185 [RMI TCP Connection(3)-192.168.8.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-13.00:49:42.186 [RMI TCP Connection(3)-192.168.8.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-13.00:49:42.187 [RMI TCP Connection(3)-192.168.8.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-12-13.00:49:42.247 [RMI TCP Connection(2)-192.168.8.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-13.00:49:43.522 [RMI TCP Connection(2)-192.168.8.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-13.00:50:00.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:50:00.119 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:50:00.178 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:50:13.880 [http-nio-8091-exec-3] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-13.00:50:32.074 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:50:32.141 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:50:55.642 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:608964007094
24-12-13.00:51:02.476 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:51:02.477 [http-nio-8091-exec-3] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-13.00:51:06.259 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:51:06.525 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:51:10.330 [http-nio-8091-exec-3] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-13.00:51:10.887 [http-nio-8091-exec-3] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 106 ruleModel: default
24-12-13.00:51:44.063 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:51:59.111 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:52:05.678 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:52:19.052 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:52:37.727 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:52:52.961 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:53:32.777 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:53:37.202 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:53:56.309 [http-nio-8091-exec-3] INFO  LuckAwardLogicTreeNode - 规则树过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-13.00:53:58.617 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:54:13.144 [http-nio-8091-exec-3] INFO  AbstractRaffleLogic    - 规则树逻辑执行完毕执行- 结果为 奖品id 101 
24-12-13.00:54:13.145 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:54:15.486 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:106
24-12-13.00:54:16.543 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:54:17.360 [http-nio-8091-exec-3] INFO  EventPublisher         - 发送MQ消息 topic: send_award message: {"eventId":"1D7bNnOmuhD","timestamp":"Dec 13, 2024 12:54:16 AM","data":{"awardId":101,"userId":"rem","awardTitle":"随机积分"}}
24-12-13.00:54:17.420 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"eventId":"1D7bNnOmuhD","timestamp":"Dec 13, 2024 12:54:16 AM","data":{"awardId":101,"userId":"rem","awardTitle":"随机积分"}}
24-12-13.00:54:17.499 [http-nio-8091-exec-3] INFO  AwardRepository        - 写入中奖记录，发送MQ消息完成 userId: rem orderId:608964007094 topic: send_award
24-12-13.00:54:27.812 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-13.00:54:27.866 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-13.00:54:28.369 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-13.00:54:28.369 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-13.00:54:29.287 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-13.00:54:29.287 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-13.00:54:29.797 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-13.00:54:29.809 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
24-12-13.00:56:51.336 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 2084 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-13.00:56:51.338 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-13.00:56:52.145 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-13.00:56:52.146 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-13.00:56:52.202 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 45 ms. Found 0 Redis repository interfaces.
24-12-13.00:56:52.627 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-13.00:56:52.737 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-13.00:56:52.743 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-13.00:56:52.744 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-13.00:56:52.899 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-13.00:56:52.900 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1523 ms
24-12-13.00:56:53.122 [main            ] INFO  Version                - Redisson 3.26.0
24-12-13.00:56:54.243 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-13.00:56:54.704 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-13.00:57:00.478 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-13.00:57:00.627 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-13.00:57:00.643 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-13.00:57:00.645 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-13.00:57:00.942 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#5b0dbfb:0/SimpleConnection@5a8d676e [delegate=amqp://lain@110.41.180.185:5672/, localPort= 53048]
24-12-13.00:57:01.751 [main            ] INFO  Application            - Started Application in 10.891 seconds (JVM running for 13.016)
24-12-13.00:57:04.156 [RMI TCP Connection(3)-192.168.8.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-13.00:57:04.156 [RMI TCP Connection(3)-192.168.8.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-13.00:57:04.160 [RMI TCP Connection(3)-192.168.8.1] INFO  DispatcherServlet      - Completed initialization in 3 ms
24-12-13.00:57:04.198 [RMI TCP Connection(2)-192.168.8.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-13.00:57:05.262 [RMI TCP Connection(2)-192.168.8.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-13.00:57:30.011 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:57:30.212 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:58:00.004 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:58:00.159 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:58:00.219 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:58:30.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:58:30.078 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:58:45.110 [http-nio-8091-exec-1] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-13.00:58:46.385 [http-nio-8091-exec-1] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:623748265624
24-12-13.00:58:46.387 [http-nio-8091-exec-1] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-13.00:58:46.681 [http-nio-8091-exec-1] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-13.00:58:46.683 [http-nio-8091-exec-1] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 101 ruleModel: default
24-12-13.00:58:47.011 [http-nio-8091-exec-1] ERROR StockLogicTreeNode     - 规则树过滤-扣减库存失败
24-12-13.00:58:47.018 [http-nio-8091-exec-1] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
java.lang.NullPointerException: null
	at top.javarem.domain.strategy.service.AbstractRaffleLogic.performRaffle(AbstractRaffleLogic.java:57)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:81)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
24-12-13.00:59:00.010 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.00:59:00.375 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.00:59:00.442 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:59:30.001 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.00:59:30.101 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:00:00.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.01:00:00.073 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:00:00.131 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:00:30.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:00:30.062 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:01:00.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.01:01:00.088 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:01:00.164 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:01:30.003 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:01:30.163 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:02:00.030 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:02:00.182 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:02:00.317 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.01:02:03.682 [http-nio-8091-exec-4] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-13.01:02:04.152 [http-nio-8091-exec-4] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserRaffleConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=623748265624, orderTime=Fri Dec 13 00:58:46 CST 2024, status=CREATE)
24-12-13.01:02:04.152 [http-nio-8091-exec-4] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:623748265624
24-12-13.01:02:04.152 [http-nio-8091-exec-4] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-13.01:02:04.441 [http-nio-8091-exec-4] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-13.01:02:04.441 [http-nio-8091-exec-4] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 106 ruleModel: default
24-12-13.01:02:04.873 [http-nio-8091-exec-4] ERROR StockLogicTreeNode     - 规则树过滤-扣减库存失败
24-12-13.01:02:04.874 [http-nio-8091-exec-4] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
java.lang.NullPointerException: null
	at top.javarem.domain.strategy.service.AbstractRaffleLogic.performRaffle(AbstractRaffleLogic.java:57)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:81)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
24-12-13.01:02:30.012 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:02:30.312 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:03:00.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.01:03:00.101 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:03:00.351 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:03:30.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:03:30.073 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:04:00.017 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.01:04:00.080 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:04:00.137 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:04:30.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:04:30.178 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:05:00.014 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:05:00.238 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:05:00.296 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.01:05:30.006 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:05:30.115 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:06:00.002 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:06:00.114 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:06:00.170 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.01:06:30.005 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:06:30.059 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:07:00.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:07:00.073 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.01:07:00.140 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:07:30.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:07:30.079 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:08:00.012 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:08:00.171 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.01:08:00.241 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:08:30.002 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:08:30.262 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:09:00.016 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:09:00.229 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.01:09:00.295 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:09:27.249 [http-nio-8091-exec-8] INFO  RaffleActivityController - 活动数据装配 activityId:100301
24-12-13.01:09:30.015 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:09:30.132 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:10:00.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.01:10:00.066 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:10:00.187 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:10:30.014 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:10:30.139 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:11:00.022 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:11:00.070 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:11:00.201 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.01:11:30.012 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:11:30.110 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:12:00.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.01:12:00.073 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:12:00.187 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:12:28.628 [http-nio-8091-exec-11] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-13.01:12:29.042 [http-nio-8091-exec-11] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserRaffleConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=623748265624, orderTime=Fri Dec 13 00:58:46 CST 2024, status=CREATE)
24-12-13.01:12:29.042 [http-nio-8091-exec-11] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:623748265624
24-12-13.01:12:29.042 [http-nio-8091-exec-11] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-13.01:12:29.485 [http-nio-8091-exec-11] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-13.01:12:29.485 [http-nio-8091-exec-11] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 103 ruleModel: default
24-12-13.01:12:30.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:12:30.072 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:12:30.086 [http-nio-8091-exec-11] ERROR StockLogicTreeNode     - 规则树过滤-扣减库存失败
24-12-13.01:12:30.087 [http-nio-8091-exec-11] INFO  LuckAwardLogicTreeNode - 规则树过滤-兜底奖品 luckAwardId : 101 scoreRange : 1,100 
24-12-13.01:12:30.089 [http-nio-8091-exec-11] INFO  AbstractRaffleLogic    - 规则树逻辑执行完毕执行- 结果为 奖品id 101 
24-12-13.01:12:30.709 [http-nio-8091-exec-11] INFO  EventPublisher         - 发送MQ消息 topic: send_award message: {"eventId":"NBeWiNdzIQk","timestamp":"Dec 13, 2024 1:12:30 AM","data":{"awardId":101,"userId":"rem","awardTitle":"随机积分"}}
24-12-13.01:12:30.783 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"eventId":"NBeWiNdzIQk","timestamp":"Dec 13, 2024 1:12:30 AM","data":{"awardId":101,"userId":"rem","awardTitle":"随机积分"}}
24-12-13.01:12:30.822 [http-nio-8091-exec-11] INFO  AwardRepository        - 写入中奖记录，发送MQ消息完成 userId: rem orderId:623748265624 topic: send_award
24-12-13.01:12:47.352 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-13.01:12:47.401 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-13.01:12:47.840 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-13.01:12:47.954 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-13.01:12:58.777 [main            ] INFO  Application            - Starting Application using Java 1.8.0_151 on mile with PID 22576 (D:\Develop\project\rem-market\market-app\target\classes started by aaa in D:\Develop\project\rem-market)
24-12-13.01:12:58.780 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-12-13.01:12:59.513 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-13.01:12:59.514 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-13.01:12:59.566 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 42 ms. Found 0 Redis repository interfaces.
24-12-13.01:12:59.977 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-12-13.01:13:00.054 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-12-13.01:13:00.105 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-12-13.01:13:00.106 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-12-13.01:13:00.261 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-12-13.01:13:00.261 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1448 ms
24-12-13.01:13:00.484 [main            ] INFO  Version                - Redisson 3.26.0
24-12-13.01:13:01.339 [redisson-netty-1-6] INFO  ConnectionsHolder      - 1 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-13.01:13:02.020 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 110.41.180.185/110.41.180.185:6379
24-12-13.01:13:07.563 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-13.01:13:07.689 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-12-13.01:13:07.705 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-12-13.01:13:07.708 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [110.41.180.185:5672]
24-12-13.01:13:08.010 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3312f4f4:0/SimpleConnection@6caa4dc5 [delegate=amqp://lain@110.41.180.185:5672/, localPort= 53227]
24-12-13.01:13:10.218 [main            ] INFO  Application            - Started Application in 11.833 seconds (JVM running for 13.779)
24-12-13.01:13:10.635 [RMI TCP Connection(1)-192.168.8.1] INFO  HikariDataSource       - HikariPool-1 - Starting...
24-12-13.01:13:11.702 [RMI TCP Connection(1)-192.168.8.1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
24-12-13.01:13:12.279 [RMI TCP Connection(3)-192.168.8.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-12-13.01:13:12.279 [RMI TCP Connection(3)-192.168.8.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-12-13.01:13:12.280 [RMI TCP Connection(3)-192.168.8.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-12-13.01:13:30.010 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:13:30.234 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:14:00.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:14:00.060 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.01:14:00.110 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:14:22.598 [http-nio-8091-exec-2] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-13.01:14:22.885 [http-nio-8091-exec-2] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:rem activityId: 100301 UserConsumeOrderEntityUserRaffleConsumeOrderEntity(userId=rem, strategyId=100006, activityId=100301, activityName=null, orderId=623748265624, orderTime=Fri Dec 13 00:58:46 CST 2024, status=CREATE)
24-12-13.01:14:22.886 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:623748265624
24-12-13.01:14:22.887 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-13.01:14:23.177 [http-nio-8091-exec-2] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-13.01:14:23.179 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 107 ruleModel: default
24-12-13.01:14:24.022 [http-nio-8091-exec-2] INFO  AbstractRaffleLogic    - 规则树逻辑执行完毕执行- 结果为 奖品id 107 
24-12-13.01:14:24.513 [http-nio-8091-exec-2] ERROR AwardRepository        - 写入中奖记录，唯一索引冲突 userId: rem activityId: 100301 awardId: 107
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '623748265624' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '623748265624' for key 'user_award_record.uq_order_id'
; Duplicate entry '623748265624' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '623748265624' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$d73364e1.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$fed49b47.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '623748265624' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-13.01:14:24.651 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:rem activityId:100301
top.javarem.types.exception.AppException: null
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:77)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.saveAwardRecord(AwardRepository.java:69)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$FastClassBySpringCGLIB$$ebfbc5e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at top.javarem.infrastructure.adapter.repository.AwardRepository$$EnhancerBySpringCGLIB$$fed49b47.saveAwardRecord(<generated>)
	at top.javarem.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:52)
	at top.javarem.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '623748265624' for key 'user_award_record.uq_order_id'
### The error may exist in top/javarem/infrastructure/dao/mapper/UserAwardRecordMapper.java (best guess)
### The error may involve top.javarem.infrastructure.dao.mapper.UserAwardRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO user_award_record  ( user_id, activity_id, order_id, strategy_id, award_id, award_title,  award_time, status, create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?,  ?, ?, ?, ?  )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '623748265624' for key 'user_award_record.uq_order_id'
; Duplicate entry '623748265624' for key 'user_award_record.uq_order_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '623748265624' for key 'user_award_record.uq_order_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at com.sun.proxy.$Proxy94.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy100.insert(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.IService.save(IService.java:61)
	at com.baomidou.mybatisplus.extension.service.IService$$FastClassBySpringCGLIB$$f8525d18.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386)
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704)
	at top.javarem.infrastructure.dao.iService.Impl.UserAwardRecordServiceImpl$$EnhancerBySpringCGLIB$$d73364e1.save(<generated>)
	at top.javarem.infrastructure.adapter.repository.AwardRepository.lambda$saveAwardRecord$0(AwardRepository.java:71)
	... 68 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '623748265624' for key 'user_award_record.uq_order_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 82 common frames omitted
24-12-13.01:14:30.008 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:14:30.237 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:14:47.609 [http-nio-8091-exec-3] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-13.01:14:48.924 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:410241322396
24-12-13.01:14:48.924 [http-nio-8091-exec-3] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-13.01:14:49.188 [http-nio-8091-exec-3] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-13.01:14:49.189 [http-nio-8091-exec-3] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 104 ruleModel: default
24-12-13.01:14:49.651 [http-nio-8091-exec-3] INFO  AbstractRaffleLogic    - 规则树逻辑执行完毕执行- 结果为 奖品id 104 
24-12-13.01:14:50.291 [http-nio-8091-exec-3] INFO  EventPublisher         - 发送MQ消息 topic: send_award message: {"eventId":"0lQEHa9MlXg","timestamp":"Dec 13, 2024 1:14:49 AM","data":{"awardId":104,"userId":"rem","awardTitle":"5等奖"}}
24-12-13.01:14:50.362 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"eventId":"0lQEHa9MlXg","timestamp":"Dec 13, 2024 1:14:49 AM","data":{"awardId":104,"userId":"rem","awardTitle":"5等奖"}}
24-12-13.01:14:50.415 [http-nio-8091-exec-3] INFO  AwardRepository        - 写入中奖记录，发送MQ消息完成 userId: rem orderId:410241322396 topic: send_award
24-12-13.01:15:00.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:15:00.179 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:15:00.300 [scheduling-1    ] INFO  UpdateAwardStockJob    - 更新奖品库存任务
24-12-13.01:15:00.580 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:107
24-12-13.01:15:00.805 [scheduling-1    ] INFO  UpdateAwardStockJob    - true strategyId:100006 awardId:104
24-12-13.01:15:28.493 [http-nio-8091-exec-4] INFO  RaffleActivityController - 抽奖活动- 用户id:100301 活动id:100301
24-12-13.01:15:29.606 [http-nio-8091-exec-4] INFO  RaffleActivityController - 活动抽奖- 创建参与记录订单 orderId:502238656302
24-12-13.01:15:29.606 [http-nio-8091-exec-4] INFO  AbstractRaffleLogic    - 开始执行抽奖策略核心流程 用户id : rem, 策略id : 100006
24-12-13.01:15:29.920 [http-nio-8091-exec-4] INFO  DefaultLogicNode       - 抽奖责任链-默认规则接管执行
24-12-13.01:15:29.920 [http-nio-8091-exec-4] INFO  AbstractRaffleLogic    - 责任链执行完毕- 结果为 awardId: 104 ruleModel: default
24-12-13.01:15:30.001 [scheduling-1    ] INFO  SendMessageTaskJob     - 发送MQ消息任务开始执行
24-12-13.01:15:30.062 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 活动库存扣减定时任务
24-12-13.01:15:30.302 [http-nio-8091-exec-4] INFO  AbstractRaffleLogic    - 规则树逻辑执行完毕执行- 结果为 奖品id 104 
24-12-13.01:15:30.849 [http-nio-8091-exec-4] INFO  EventPublisher         - 发送MQ消息 topic: send_award message: {"eventId":"7OMV1ZGgkky","timestamp":"Dec 13, 2024 1:15:30 AM","data":{"awardId":104,"userId":"rem","awardTitle":"5等奖"}}
24-12-13.01:15:30.918 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"eventId":"7OMV1ZGgkky","timestamp":"Dec 13, 2024 1:15:30 AM","data":{"awardId":104,"userId":"rem","awardTitle":"5等奖"}}
24-12-13.01:15:30.986 [http-nio-8091-exec-4] INFO  AwardRepository        - 写入中奖记录，发送MQ消息完成 userId: rem orderId:502238656302 topic: send_award
24-12-13.01:15:39.883 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-13.01:15:39.943 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-13.01:15:39.945 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-13.01:15:40.057 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-13.01:15:40.929 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-13.01:15:40.929 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-13.01:15:41.192 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
24-12-13.01:15:41.204 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
